<!--
  Copyright (c) 2006-2013, JGraph Ltd
  
  Folding example for mxGraph. This example demonstrates
  using a layout to implement a nested group structure.
-->
<html>

<head>
    <title>Hierarchical example for mxGraph</title>

    <!-- Sets the basepath for the library if not in same directory -->
    <script type="text/javascript">
        mxBasePath = 'mxgraph';
    </script>

    <!-- Loads and initializes the library -->
    <script type="text/javascript" src="mxClient.js"></script>

    <!-- Example code -->
    <script type="text/javascript">
        var graph
        // Program starts here. Creates a sample graph in the
        // DOM node with the specified ID. This function is invoked
        // from the onLoad event handler of the document (see below).
        function main(container) {
            // Checks if the browser is supported
            if (!mxClient.isBrowserSupported()) {
                // Displays an error message if the browser is not supported.
                mxUtils.error('Browser is not supported!', 200, false);
            } else {
                // Enables crisp rendering of rectangles in SVG
                mxConstants.ENTITY_SEGMENT = 20;

                // Creates the graph inside the given container
                graph = new mxGraph(container);

                // Disables global features
                graph.collapseToPreferredSize = false;
                graph.constrainChildren = true;
                graph.cellsSelectable = false;
                graph.extendParentsOnAdd = false;
                graph.extendParents = true;
                graph.border = 10;


                graph.setCellsSelectable(false);
                graph.constrainChildren = false;

                var style = graph.getStylesheet().getDefaultEdgeStyle();
                style[mxConstants.STYLE_EDGE] = mxEdgeStyle.EntityRelation;
                style[mxConstants.STYLE_ROUNDED] = true;

                // Installs auto layout for all levels
                var layout = new mxHierarchicalLayout(graph, mxConstants.DIRECTION_WEST);

                // Resizes the container
                graph.setResizeContainer(true);

                // Gets the default parent for inserting new cells. This
                // is normally the first child of the root (ie. layer 0).
                var parent = graph.getDefaultParent();

                // Adds cells to the model in a single step
                graph.getModel().beginUpdate();
                try {
                    var v1 = graph.insertVertex(parent, null, 'main', 0, 0, 80, 30);
                    var v2 = graph.insertVertex(parent, null, 'mainBackup', 0, 0, 80, 30);
                    var v3 = graph.insertVertex(parent, null, 'game', 0, 0, 80, 30);
                    var v4 = graph.insertVertex(parent, null, 'player', 0, 0, 80, 30);
                    var v5 = graph.insertVertex(parent, null, 'rule', 0, 0, 80, 30);
                    var v6 = graph.insertVertex(parent, null, 'settings', 0, 0, 80, 30);

                    var e1 = graph.insertEdge(parent, null, '', v1, v3);
                    var e2 = graph.insertEdge(parent, null, '', v2, v3);
                    var e3 = graph.insertEdge(parent, null, '', v3, v4);
                    var e4 = graph.insertEdge(parent, null, '', v3, v5);
                    var e4 = graph.insertEdge(parent, null, '', v3, v6);

                    layout.execute(parent);

                } finally {
                    // Updates the display
                    graph.getModel().endUpdate();
                    graph.setCellsMovable(false);
                }
            }
        };
    </script>
</head>

<!-- Page passes the container for the graph to the program -->

<body onload="main(document.getElementById('graphContainer'))">

    <!-- Creates a container for the graph with a grid wallpaper -->
    <div id="graphContainer">
    </div>
</body>

</html>