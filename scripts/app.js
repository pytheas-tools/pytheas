"use strict";var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var dayjs_min=createCommonjsModule(function(module,exports){!function(t,n){module.exports=n()}(commonjsGlobal,function(){var t="millisecond",n="second",e="minute",r="hour",i="day",s="week",u="month",o="quarter",a="year",h=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,f=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(t,n,e){var r=String(t);return!r||r.length>=n?t:""+Array(n+1-r.length).join(e)+t},d={s:c,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),i=e%60;return(n<=0?"+":"-")+c(r,2,"0")+":"+c(i,2,"0")},m:function(t,n){var e=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(e,u),i=n-r<0,s=t.clone().add(e+(i?-1:1),u);return Number(-(e+(n-r)/(i?r-s:s-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:u,y:a,w:s,d:i,h:r,m:e,s:n,ms:t,Q:o}[h]||String(h||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},$={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},l="en",m={};m[l]=$;var y=function(t){return t instanceof v},M=function(t,n,e){var r;if(!t)return l;if("string"==typeof t)m[t]&&(r=t),n&&(m[t]=n,r=t);else{var i=t.name;m[i]=t,r=i}return e||(l=r),r},g=function(t,n,e){if(y(t))return t.clone();var r=n?"string"==typeof n?{format:n,pl:e}:n:{};return r.date=t,new v(r)},D=d;D.l=M,D.i=y,D.w=function(t,n){return g(t,{locale:n.$L,utc:n.$u,$offset:n.$offset})};var v=function(){function c(t){this.$L=this.$L||M(t.locale,null,!0),this.parse(t)}var d=c.prototype;return d.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if(D.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var r=n.match(h);if(r)return e?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(n)}(t),this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return D},d.isValid=function(){return!("Invalid Date"===this.$d.toString())},d.isSame=function(t,n){var e=g(t);return this.startOf(n)<=e&&e<=this.endOf(n)},d.isAfter=function(t,n){return g(t)<this.startOf(n)},d.isBefore=function(t,n){return this.endOf(n)<g(t)},d.$g=function(t,n,e){return D.u(t)?this[n]:this.set(e,t)},d.year=function(t){return this.$g(t,"$y",a)},d.month=function(t){return this.$g(t,"$M",u)},d.day=function(t){return this.$g(t,"$W",i)},d.date=function(t){return this.$g(t,"$D","date")},d.hour=function(t){return this.$g(t,"$H",r)},d.minute=function(t){return this.$g(t,"$m",e)},d.second=function(t){return this.$g(t,"$s",n)},d.millisecond=function(n){return this.$g(n,"$ms",t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,o){var h=this,f=!!D.u(o)||o,c=D.p(t),d=function(t,n){var e=D.w(h.$u?Date.UTC(h.$y,n,t):new Date(h.$y,n,t),h);return f?e:e.endOf(i)},$=function(t,n){return D.w(h.toDate()[t].apply(h.toDate(),(f?[0,0,0,0]:[23,59,59,999]).slice(n)),h)},l=this.$W,m=this.$M,y=this.$D,M="set"+(this.$u?"UTC":"");switch(c){case a:return f?d(1,0):d(31,11);case u:return f?d(1,m):d(0,m+1);case s:var g=this.$locale().weekStart||0,v=(l<g?l+7:l)-g;return d(f?y-v:y+(6-v),m);case i:case"date":return $(M+"Hours",0);case r:return $(M+"Minutes",1);case e:return $(M+"Seconds",2);case n:return $(M+"Milliseconds",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(s,o){var h,f=D.p(s),c="set"+(this.$u?"UTC":""),d=(h={},h[i]=c+"Date",h.date=c+"Date",h[u]=c+"Month",h[a]=c+"FullYear",h[r]=c+"Hours",h[e]=c+"Minutes",h[n]=c+"Seconds",h[t]=c+"Milliseconds",h)[f],$=f===i?this.$D+(o-this.$W):o;if(f===u||f===a){var l=this.clone().set("date",1);l.$d[d]($),l.init(),this.$d=l.set("date",Math.min(this.$D,l.daysInMonth())).toDate()}else d&&this.$d[d]($);return this.init(),this},d.set=function(t,n){return this.clone().$set(t,n)},d.get=function(t){return this[D.p(t)]()},d.add=function(t,o){var h,f=this;t=Number(t);var c=D.p(o),d=function(n){var e=g(f);return D.w(e.date(e.date()+Math.round(n*t)),f)};if(c===u)return this.set(u,this.$M+t);if(c===a)return this.set(a,this.$y+t);if(c===i)return d(1);if(c===s)return d(7);var $=(h={},h[e]=6e4,h[r]=36e5,h[n]=1e3,h)[c]||1,l=this.$d.getTime()+t*$;return D.w(l,this)},d.subtract=function(t,n){return this.add(-1*t,n)},d.format=function(t){var n=this;if(!this.isValid())return"Invalid Date";var e=t||"YYYY-MM-DDTHH:mm:ssZ",r=D.z(this),i=this.$locale(),s=this.$H,u=this.$m,o=this.$M,a=i.weekdays,h=i.months,c=function(t,r,i,s){return t&&(t[r]||t(n,e))||i[r].substr(0,s)},d=function(t){return D.s(s%12||12,t,"0")},$=i.meridiem||function(t,n,e){var r=t<12?"AM":"PM";return e?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:D.s(o+1,2,"0"),MMM:c(i.monthsShort,o,h,3),MMMM:h[o]||h(this,e),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,a,2),ddd:c(i.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(s),HH:D.s(s,2,"0"),h:d(1),hh:d(2),a:$(s,u,!0),A:$(s,u,!1),m:String(u),mm:D.s(u,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:r};return e.replace(f,function(t,n){return n||l[t]||r.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(t,h,f){var c,d=D.p(h),$=g(t),l=6e4*($.utcOffset()-this.utcOffset()),m=this-$,y=D.m(this,$);return y=(c={},c[a]=y/12,c[u]=y,c[o]=y/3,c[s]=(m-l)/6048e5,c[i]=(m-l)/864e5,c[r]=m/36e5,c[e]=m/6e4,c[n]=m/1e3,c)[d]||m,f?y:D.a(y)},d.daysInMonth=function(){return this.endOf(u).$D},d.$locale=function(){return m[this.$L]},d.locale=function(t,n){if(!t)return this.$L;var e=this.clone();return e.$L=M(t,n,!0),e},d.clone=function(){return D.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},c}();return g.prototype=v.prototype,g.extend=function(t,n){return t(n,v,g),g},g.locale=M,g.isDayjs=y,g.unix=function(t){return g(1e3*t)},g.en=m[l],g.Ls=m,g})});var EVENTS={FILES_COMING:"files-coming",FILES_PARSED:"files-parsed",CODEBLOCK_MAXIMIZED:"codeblockMaximized",CODEBLOCK_UNMAXIMIZED:"codeblockUnmaximized",CODEBLOCK_STATEMENT_CLICKED:"codeblockStatementClicked",NAVIGATIONBAR_BACK:"navigationBarBackEvent",NAVIGATIONBAR_HOME:"navigationBarHomeEvent",NAVIGATIONBAR_NEXT:"navigationBarNextEvent",NAVIGATIONBAR_ONUPDATE:"navigationBarOnUpdate",GRAPH_ELEMENT_SELECTED:"graphElementSelected",GRAPH_SUBELEMENT_SELECTED:"graphSubElementSelected",GRAPH_OVERVIEW_DETAIL_SELECTED:"graphOverviewDetailSelected",SOMETHING_SELECTED:"somethingSelected",INIT_VIEW:"initView",THEME_CHANGED:"themeChanged",SAVEGRAPHASIMAGE:"savegraphasimage"};function extensionToLanguage(extension){var language="";switch(extension){case"js":language="javascript";break;case"ts":language="typescript";break}return language}var sloc=createCommonjsModule(function(module){(function(){var countComments,countMixed,emptyLines,emptyLns,endOfLine,extensions,getCommentExpressions,getStopRegex,getType,indexOfGroup,keys,lineSum,matchDefinedGroup,matchIdx,newLines,newLns,nonEmpty,slocModule,todoLines,todoLns,trampoline,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1};keys=["total","source","comment","single","block","mixed","blockEmpty","empty","todo"];nonEmpty=/[^\s]/;endOfLine=/$/m;newLines=/\n/g;emptyLines=/^\s*$/gm;todoLines=/^.*TODO.*$/gm;getCommentExpressions=function(lang){var r,single,start,stop;single=function(){switch(lang){case"coffee":case"iced":return/\#[^\{]/;case"cr":case"py":case"ls":case"mochi":case"nix":case"r":case"rb":case"jl":case"pl":case"yaml":case"hr":return/\#/;case"js":case"jsx":case"mjs":case"c":case"cc":case"cpp":case"cs":case"cxx":case"h":case"m":case"mm":case"hpp":case"hx":case"hxx":case"ino":case"java":case"php":case"php5":case"go":case"groovy":case"scss":case"less":case"rs":case"sass":case"styl":case"scala":case"swift":case"ts":case"jade":case"gs":case"nut":case"kt":case"kts":case"tsx":case"fs":case"fsi":case"fsx":case"bsl":return/\/{2}/;case"latex":case"tex":case"sty":case"cls":return start=/\%/;case"lua":case"hs":case"sql":return/--/;case"erl":return/\%/;case"brs":case"monkey":case"vb":return/'/;case"nim":r=/(?:^[^\#]*)(\#)(?:(?![\#\!]))/;r._matchGroup_=1;return r;case"rkt":case"clj":case"cljs":case"hy":case"asm":return/;/;case"ly":case"ily":return start=/%/;case"f90":case"f95":case"f03":case"f08":case"f18":return/\!/;default:return null}}();switch(lang){case"coffee":case"iced":start=stop=/\#{3}/;break;case"js":case"jsx":case"mjs":case"c":case"cc":case"cpp":case"cs":case"cxx":case"h":case"m":case"mm":case"hpp":case"hx":case"hxx":case"ino":case"java":case"ls":case"nix":case"php":case"php5":case"go":case"css":case"sass":case"scss":case"less":case"rs":case"styl":case"scala":case"ts":case"gs":case"groovy":case"nut":case"kt":case"kts":case"tsx":case"sql":start=/\/\*+/;stop=/\*\/{1}/;break;case"python":case"py":start=stop=/\"{3}|\'{3}/;break;case"handlebars":case"hbs":case"mustache":start=/\{\{\!/;stop=/\}\}/;break;case"hs":start=/\{-/;stop=/-\}/;break;case"html":case"htm":case"svg":case"xml":case"vue":start=/<\!--/;stop=/-->/;break;case"lua":start=/--\[{2}/;stop=/--\]{2}/;break;case"monkey":start=/#rem/i;stop=/#end/i;break;case"nim":start=/\#{2}/;break;case"rb":start=/\=begin/;stop=/\=end/;break;case"rkt":start=/#\|/;stop=/\|#/;break;case"jl":start=/\#\=/;stop=/\=\#/;break;case"ml":case"mli":case"fs":case"fsi":case"fsx":start=/\(\*/;stop=/\*\)/;break;case"ly":case"ily":start=/%\{/;stop=/%\}/;break;default:if(indexOf.call(extensions,lang)>=0){start=stop=null}else{throw new TypeError("File extension '"+lang+"' is not supported")}}return{start:start,stop:stop,single:single}};countMixed=function(res,lines,idx,startIdx,match){var ref;if(nonEmpty.exec(lines[0])&&(((ref=res.last)!=null?ref.stop:void 0)===idx||startIdx===idx)){res.mixed.push({start:idx,stop:idx})}if(match!=null&&nonEmpty.exec(lines.slice(-1)[0].substr(0,match.index))){return res.mixed.push({start:startIdx,stop:startIdx})}};getStopRegex=function(type,regex){switch(type){case"single":return endOfLine;case"block":return regex||endOfLine}};getType=function(single,start){if(single&&!start){return"single"}else if(start&&!single){return"block"}else{if(start.index<=single.index){return"block"}else{return"single"}}};matchIdx=function(m){return m.index+m[0].length};emptyLns=function(c){var ref;return((ref=c.match(emptyLines))!=null?ref.length:void 0)||0};newLns=function(c){var ref;return((ref=c.match(newLines))!=null?ref.length:void 0)||0};todoLns=function(c){var ref;return((ref=c.match(todoLines))!=null?ref.length:void 0)||0};indexOfGroup=function(match,n){var i,ix,j,ref;ix=match.index;for(i=j=1,ref=n;1<=ref?j<=ref:j>=ref;i=1<=ref?++j:--j){ix+=match[i].length}return ix};matchDefinedGroup=function(reg,code){var g,res;res=reg!=null?reg.exec(code):void 0;if(res!=null&&(g=reg!=null?reg._matchGroup_:void 0)!=null){res.index=indexOfGroup(res,g);res[0]=res[g]}return res};countComments=function(code,regex){var myself;myself=function(res,code,idx){var cStartIdx,comment,empty,len,lines,match,single,splitAt,start,startIdx,stop,type;if(code===""){return res}if(code[0]==="\n"){return function(){return myself(res,code.slice(1),++idx)}}start=matchDefinedGroup(regex.start,code);single=matchDefinedGroup(regex.single,code);if(!(start||single)){countMixed(res,code.split("\n"),idx);return res}type=getType(single,start);match=function(){switch(type){case"single":return single;case"block":return start}}();cStartIdx=matchIdx(match);comment=code.substring(cStartIdx);lines=code.substring(0,match.index).split("\n");startIdx=lines.length-1+idx;stop=matchDefinedGroup(getStopRegex(type,regex.stop),comment);if(!stop){res.error=true;return res}empty=emptyLns(code.substring(match.index,cStartIdx+matchIdx(stop)));comment=comment.substring(0,stop.index);len=newLns(comment);splitAt=cStartIdx+comment.length+stop[0].length;code=code.substring(splitAt);countMixed(res,lines,idx,startIdx,match);res.last={start:startIdx,stop:startIdx+len,empty:empty};res[type].push(res.last);return function(){return myself(res,code,startIdx+len)}};return trampoline(myself({single:[],block:[],mixed:[]},code,0))};trampoline=function(next){while(typeof next==="function"){next=next()}return next};lineSum=function(comments){var c,d,i,j,len1,ref,sum;sum=0;for(i=j=0,len1=comments.length;j<len1;i=++j){c=comments[i];d=c.stop-c.start+1;if(((ref=comments[i+1])!=null?ref.start:void 0)===c.stop){d--}sum+=d}return sum};slocModule=function(code,lang,opt){var b,bIdx,block,blockEmpty,comment,empty,j,k,len1,len2,mixed,ref,ref1,ref2,res,s,single,source,todo,total,x;if(opt==null){opt={}}if(typeof code!=="string"){throw new TypeError("'code' has to be a string")}code=code.replace(/\r\n|\r/g,"\n");if(code.slice(-1)==="\n"){code=code.slice(0,-1)}total=1+newLns(code)||1;empty=emptyLns(code);res=countComments(code,getCommentExpressions(lang));single=lineSum(res.single);block=lineSum(res.block);mixed=lineSum(res.mixed);comment=block+single;todo=todoLns(code);bIdx=function(){var j,len1,ref,results;ref=res.block;results=[];for(j=0,len1=ref.length;j<len1;j++){b=ref[j];results.push(b.stop)}return results}();ref=res.single;for(j=0,len1=ref.length;j<len1;j++){s=ref[j];if(ref1=s.start,indexOf.call(bIdx,ref1)>=0){comment--}}blockEmpty=0;ref2=res.block;for(k=0,len2=ref2.length;k<len2;k++){x=ref2[k];blockEmpty+=x.empty}source=total-comment-empty+blockEmpty+mixed;if(opt.debug){void 0}return{total:total,source:source,comment:comment,single:single,block:block,mixed:mixed,empty:empty,todo:todo,blockEmpty:blockEmpty}};extensions=["asm","brs","c","cc","clj","cljs","cls","coffee","cpp","cr","cs","css","cxx","erl","f90","f95","f03","f08","f18","fs","fsi","fsx","go","groovy","gs","h","handlebars","hbs","hpp","hr","hs","html","htm","hx","hxx","hy","iced","ily","ino","jade","java","jl","js","jsx","mjs","kt","kts","latex","less","ly","lua","ls","ml","mli","mochi","monkey","mustache","nix","nim","nut","php","php5","pl","py","r","rb","rkt","rs","sass","scala","scss","sty","styl","svg","sql","swift","tex","ts","tsx","vb","vue","xml","yaml","m","mm","bsl"];slocModule.extensions=extensions;slocModule.keys=keys;if((module!==null?module.exports:void 0)!=null){module.exports=slocModule}else if(typeof window!=="undefined"&&window!==null){window.sloc=slocModule}}).call(commonjsGlobal)});function getSlocInformations(sourceCode,type){return sloc(sourceCode,type)}function getExtension(filename){return filename.substr(filename.lastIndexOf(".")+1,filename.length)}function getName(filename){return filename.substr(filename.lastIndexOf("/")+1,filename.length)}var MESSAGES={DOWNLOADING_PARSER:"Downloading parser...",DOWNLOADING_DEMOS:"Downloading demo..."};var pubsub=function(){var topics={};var hOP=topics.hasOwnProperty;return{subscribe:function(topic,listener){if(!hOP.call(topics,topic)){topics[topic]=[]}var index=topics[topic].push(listener)-1;return{remove:function(){delete topics[topic][index]}}},publish:function(topic,info){if(!hOP.call(topics,topic)){return}topics[topic].forEach(function(item){item(info!==undefined?info:{})})}}}();function uniqId(){return Date.now().toString(36)}var tsquery;var ECMAScriptParserSingleton=function(){function ECMAScriptParserSingleton(){this.initialized=false}ECMAScriptParserSingleton.getInstance=function(){if(!ECMAScriptParserSingleton.instance){ECMAScriptParserSingleton.instance=new ECMAScriptParserSingleton}return ECMAScriptParserSingleton.instance};ECMAScriptParserSingleton.prototype.init=function(){tsquery=window.tsquery;this.ts=tsquery.tsquery.ts;this.initialized=true};ECMAScriptParserSingleton.prototype.parseFile=function(sourcecode){return tsquery.tsquery.ast(sourcecode,"",2)};ECMAScriptParserSingleton.prototype.getImportsStatements=function(sourceast){return tsquery.tsquery(sourceast,"ImportDeclaration")};ECMAScriptParserSingleton.prototype.getClassDeclarations=function(sourceast){return tsquery.tsquery(sourceast,"ClassDeclaration")};ECMAScriptParserSingleton.prototype.getFunctionDeclarations=function(sourceast){return tsquery.tsquery(sourceast,"FunctionDeclaration")};ECMAScriptParserSingleton.prototype.getPropertyDeclaration=function(sourceast){return tsquery.tsquery(sourceast,"PropertyDeclaration")};ECMAScriptParserSingleton.prototype.getMethodDeclaration=function(sourceast){return tsquery.tsquery(sourceast,"MethodDeclaration")};ECMAScriptParserSingleton.prototype.getConstructor=function(sourceast){return tsquery.tsquery(sourceast,"Constructor")};ECMAScriptParserSingleton.prototype.getNewExpressions=function(sourceast){return tsquery.tsquery(sourceast,"NewExpression")};ECMAScriptParserSingleton.prototype.getSyntaxKindName=function(index){return tsquery.tsquery.syntaxKindName(index)};ECMAScriptParserSingleton.prototype.getCallExpressions=function(sourceast){return tsquery.tsquery(sourceast,"CallExpression")};ECMAScriptParserSingleton.prototype.getBinaryExpressions=function(sourceast){return tsquery.tsquery(sourceast,"BinaryExpression")};ECMAScriptParserSingleton.prototype.getPropertyAccessExpressions=function(sourceast){return tsquery.tsquery(sourceast,"PropertyAccessExpression")};return ECMAScriptParserSingleton}();var ECMAScriptParser=ECMAScriptParserSingleton.getInstance();var javaast;var JavaParserSingleton=function(){function JavaParserSingleton(){this.parsedFiles=[]}JavaParserSingleton.getInstance=function(){if(!JavaParserSingleton.instance){JavaParserSingleton.instance=new JavaParserSingleton}return JavaParserSingleton.instance};JavaParserSingleton.prototype.init=function(){javaast=window.javaast};JavaParserSingleton.prototype.parseFile=function(sourcecode){return javaast.parse(sourcecode)};JavaParserSingleton.prototype.getClassDeclarations=function(sourceast){var entries=[];var pendingNodes=[sourceast];while(pendingNodes.length){var node=pendingNodes.shift();if(node&&node.childCount){if(node.payload.constructor.name==="ClassDeclarationContext"){entries.push(node.payload)}for(var i=0;i<node.childCount;i++){pendingNodes.push(node.getChild(i))}}}return entries};return JavaParserSingleton}();var JavaParser=JavaParserSingleton.getInstance();var vuetemplatecompiler;var VueParserSingleton=function(){function VueParserSingleton(){}VueParserSingleton.getInstance=function(){if(!VueParserSingleton.instance){VueParserSingleton.instance=new VueParserSingleton}return VueParserSingleton.instance};VueParserSingleton.prototype.init=function(){vuetemplatecompiler=window.vuetemplatecompiler};VueParserSingleton.prototype.parseFile=function(sourcecode){return vuetemplatecompiler.parseComponent(sourcecode)};VueParserSingleton.prototype.getClassDeclarations=function(sourceast){return[]};return VueParserSingleton}();var VueParser=VueParserSingleton.getInstance();var StatusbarSingleton=function(){function StatusbarSingleton(){}StatusbarSingleton.getInstance=function(){if(!StatusbarSingleton.instance){StatusbarSingleton.instance=new StatusbarSingleton}return StatusbarSingleton.instance};StatusbarSingleton.prototype.init=function(){this.$element=document.querySelector(".app-container__status-bar div")};StatusbarSingleton.prototype.displayMessage=function(message,permanent){var _this=this;if(this.$element){this.$element.innerHTML=message;if(!permanent){setTimeout(function(){_this.$element.innerHTML=""},3e3)}}};return StatusbarSingleton}();var StatusbarManager=StatusbarSingleton.getInstance();var FilesParserSingleton=function(){function FilesParserSingleton(){this.parsedFiles=[]}FilesParserSingleton.getInstance=function(){if(!FilesParserSingleton.instance){FilesParserSingleton.instance=new FilesParserSingleton}return FilesParserSingleton.instance};FilesParserSingleton.prototype.parseFiles=function(files){var _this=this;this.parsedFiles=files;return new Promise(function(resolve,reject){_this.loadParsersForFiles().then(function(){files.forEach(function(file){switch(file.extension){case"js":case"ts":file.ast=ECMAScriptParser.parseFile(file.sourcecode);file.importStatements=ECMAScriptParser.getImportsStatements(file.ast);break;case"java":file.ast=JavaParser.parseFile(file.sourcecode);break;case"vue":file.ast=VueParser.parseFile(file.sourcecode);break}try{file.sloc=getSlocInformations(file.sourcecode,file.extension)}catch(e){file.sloc=0}});resolve(files)},function(e){reject()})})};FilesParserSingleton.prototype.detectParsers=function(){var _this=this;this.parsers=new Set;this.parsedFiles.forEach(function(file){switch(file.extension){case"js":case"ts":_this.parsers.add("tsquery");break;case"java":_this.parsers.add("javaast");break;case"vue":_this.parsers.add("vue-template-compiler");break}});return this.parsers};FilesParserSingleton.prototype.initParsersInstances=function(){this.parsers.forEach(function(parser){switch(parser){case"tsquery":ECMAScriptParser.init();break;case"javaast":JavaParser.init();break;case"vue-template-compiler":VueParser.init();break}})};FilesParserSingleton.prototype.loadParsersForFiles=function(){var _this=this;return new Promise(function(resolveLoadingParsers,rejectLoadingParsers){var PYTHEAS_CONTEXT=window.PYTHEAS_CONTEXT;if(PYTHEAS_CONTEXT&&PYTHEAS_CONTEXT==="vscode"){_this.detectParsers();_this.initParsersInstances();resolveLoadingParsers()}else{var parsersToLoad=_this.detectParsers();var parsersPromiseLoading_1=[];parsersToLoad.forEach(function(parser){if(!window[parser]){parsersPromiseLoading_1.push(new Promise(function(resolveLoadingParser,rejectLoadingParser){var script=document.createElement("script");script.addEventListener("load",function(){resolveLoadingParser();StatusbarManager.displayMessage("")});script.addEventListener("error",function(){rejectLoadingParser()});script.src="scripts/"+parser+".js";script.async=true;StatusbarManager.displayMessage(MESSAGES.DOWNLOADING_PARSER,true);document.body.appendChild(script)}))}});Promise.all(parsersPromiseLoading_1).then(function(){_this.initParsersInstances();resolveLoadingParsers()},function(){rejectLoadingParsers()})}})};FilesParserSingleton.prototype.getParsedFiles=function(){return this.parsedFiles};return FilesParserSingleton}();var FilesParser=FilesParserSingleton.getInstance();var FilesReaderSingleton=function(){function FilesReaderSingleton(){this.browserReader=new FileReader}FilesReaderSingleton.getInstance=function(){if(!FilesReaderSingleton.instance){FilesReaderSingleton.instance=new FilesReaderSingleton;if(typeof require!=="undefined"){FilesReaderSingleton.instance.electronReader=require("fs")}}return FilesReaderSingleton.instance};FilesReaderSingleton.prototype.readFilesFromBrowser=function(files){var _this=this;var i=0;var len=files.length;var readedFiles=[];return new Promise(function(resolve,reject){var loopFiles=function(){var fileToRead=files[i];if(i<len){_this.readFileFromBrowser(fileToRead).then(function(readedFile){readedFiles.push(readedFile);i++;loopFiles()}).catch(function(e){reject(e)})}else{resolve(readedFiles)}};loopFiles()})};FilesReaderSingleton.prototype.readFilesFromFetchCall=function(files){var _this=this;var i=0;var len=files.length;var readedFiles=[];return new Promise(function(resolve,reject){for(i;i<len;i++){readedFiles.push(_this.readFileFromFetchCall(files[i]))}resolve(readedFiles)})};FilesReaderSingleton.prototype.readFileFromFetchCall=function(file){var fileExtension=getExtension(file.path);return{path:file.path,name:getName(file.path),extension:fileExtension,language:extensionToLanguage(fileExtension),sourcecode:file.data}};FilesReaderSingleton.prototype.readFileFromBrowser=function(file){var _this=this;return new Promise(function(resolve,reject){_this.browserReader.onload=function(e){var readedFile={path:file.fullPath,name:file.name,extension:file.extension,language:extensionToLanguage(file.extension),sourcecode:_this.browserReader.result};resolve(readedFile)};_this.browserReader.onerror=function(e){reject(e)};_this.browserReader.readAsText(file)})};FilesReaderSingleton.prototype.readFilesFromElectron=function(files){var _this=this;var i=0;var len=files.length;var readedFiles=[];return new Promise(function(resolve,reject){var loopFiles=function(){var fileToRead=files[i];if(i<len){_this.readFileFromElectron(fileToRead).then(function(readedFile){readedFiles.push(readedFile);i++;loopFiles()}).catch(function(e){reject(e)})}else{resolve(readedFiles)}};loopFiles()})};FilesReaderSingleton.prototype.readFileFromElectron=function(file){var _this=this;return new Promise(function(resolve,reject){_this.electronReader.readFile(file.path,"utf8",function(err,contents){if(err){reject(err)}var path=require("path");var fileExtension=path.extname(file.path).replace(".","");var readedFile={path:file.path,name:path.basename(file.path),extension:fileExtension,language:extensionToLanguage(fileExtension),sourcecode:contents};resolve(readedFile)})})};return FilesReaderSingleton}();var FilesReader=FilesReaderSingleton.getInstance();var notifier=createCommonjsModule(function(module,exports){!function(root,factory){module.exports=factory()}("undefined"!=typeof self?self:commonjsGlobal,function(){var count=0,d=document,myCreateElement=function(elem,attrs){var el=d.createElement(elem);for(var prop in attrs)el.setAttribute(prop,attrs[prop]);return el},createContainer=function(){var container=myCreateElement("div",{class:"notifier-container",id:"notifier-container"});d.body.appendChild(container)},show=function(title,msg,type,icon,timeout){"number"!=typeof timeout&&(timeout=0);var ntfId="notifier-"+count,container=d.querySelector(".notifier-container"),ntf=myCreateElement("div",{class:"notifier "+type}),ntfTitle=myCreateElement("h2",{class:"notifier-title"}),ntfBody=myCreateElement("div",{class:"notifier-body"}),ntfImg=myCreateElement("div",{class:"notifier-img"}),img=myCreateElement("img",{class:"img",src:icon}),ntfClose=myCreateElement("button",{class:"notifier-close",type:"button"});return ntfTitle.innerHTML=title,ntfBody.innerHTML=msg,ntfClose.innerHTML="&times;",icon.length>0&&ntfImg.appendChild(img),ntf.appendChild(ntfClose),ntf.appendChild(ntfImg),ntf.appendChild(ntfTitle),ntf.appendChild(ntfBody),container.appendChild(ntf),ntfImg.style.height=ntfImg.parentNode.offsetHeight+"px"||null,setTimeout(function(){ntf.className+=" shown",ntf.setAttribute("id",ntfId)},100),timeout>0&&setTimeout(function(){hide(ntfId)},timeout),ntfClose.addEventListener("click",function(){hide(ntfId)}),count+=1,ntfId},hide=function(notificationId){var notification=document.getElementById(notificationId);return!!notification&&(notification.className=notification.className.replace(" shown",""),setTimeout(function(){notification.parentNode.removeChild(notification)},600),!0)};return createContainer(),{show:show,hide:hide}})});var notifier_1=notifier.notifier;var NotifierSingleton=function(){function NotifierSingleton(){}NotifierSingleton.getInstance=function(){if(!NotifierSingleton.instance){NotifierSingleton.instance=new NotifierSingleton}return NotifierSingleton.instance};NotifierSingleton.prototype.info=function(message){notifier.show("Information",message,"info","",3e3)};return NotifierSingleton}();var NotifierManager=NotifierSingleton.getInstance();var SUPPORTED_FILES;(function(SUPPORTED_FILES){SUPPORTED_FILES["js"]="js";SUPPORTED_FILES["ts"]="ts";SUPPORTED_FILES["java"]="java";SUPPORTED_FILES["vue"]="vue"})(SUPPORTED_FILES||(SUPPORTED_FILES={}));function isFileSupported(extension){return extension in SUPPORTED_FILES}var Walker;if(typeof require!=="undefined"){Walker=require("walker")}var FilesScannerSingleton=function(){function FilesScannerSingleton(){this.countFiles=0;this.scannedFiles=[];this.notSupportedExtensions=new Set}FilesScannerSingleton.getInstance=function(){if(!FilesScannerSingleton.instance){FilesScannerSingleton.instance=new FilesScannerSingleton}return FilesScannerSingleton.instance};FilesScannerSingleton.prototype.clearInternals=function(){this.scannedFiles=[];this.countFiles=0;this.notSupportedExtensions.clear()};FilesScannerSingleton.prototype.scanFilesFromBrowser=function(ev){var _this=this;this.scanPromise=new Promise(function(resolve,reject){_this.scanResolve=resolve;_this.scanReject=reject;_this.clearInternals();if(ev.dataTransfer&&ev.dataTransfer.items){_this.parseFiles(ev.dataTransfer.items)}else if(ev.dataTransfer&&ev.dataTransfer.files){_this.parseFiles(ev.dataTransfer.files)}else if(ev.target&&ev.target.files){_this.parseFiles(ev.target.files)}});return this.scanPromise};FilesScannerSingleton.prototype.scanFilesFromElectron=function(path){var _this=this;this.scanPromise=new Promise(function(resolve,reject){_this.scanResolve=resolve;_this.scanReject=reject;if(typeof require!=="undefined"){_this.clearInternals();Walker(path).on("file",function(file,stat){var fileFromElectron={path:file,size:stat.size};_this.scannedFiles.push(fileFromElectron)}).on("error",function(error){_this.scanReject(error)}).on("end",function(){_this.scanResolve(_this.scannedFiles)})}});return this.scanPromise};FilesScannerSingleton.prototype.getAllNotSupportedExtensions=function(){var extensions=Array.from(this.notSupportedExtensions);var result;if(extensions.length>10){result=extensions.slice(0,10).concat(["..."]).join(", ")}else{result=extensions.join(", ")}return result};FilesScannerSingleton.prototype.updateCounter=function(quantity){this.countFiles+=quantity};FilesScannerSingleton.prototype.handleFile=function(file){if(isFileSupported(file.extension)){this.scannedFiles.push(file)}else{this.notSupportedExtensions.add(file.extension);this.updateCounter(-1)}if(this.scannedFiles.length===this.countFiles){var extensionsNotSupported=this.getAllNotSupportedExtensions();if(extensionsNotSupported.length>0){NotifierManager.info(extensionsNotSupported+" files not supported")}this.scanResolve(this.scannedFiles)}};FilesScannerSingleton.prototype.parseFiles=function(files){var _this=this;this.updateCounter(files.length);var i=0;var len=files.length;var loopFiles=function(){if(i<len){var file=files[i];var entry_1;var reader=void 0;if(file.isFile||file.isDirectory){entry_1=file}else if(file.getAsEntry){entry_1=file.getAsEntry()}else if(file.webkitGetAsEntry){entry_1=file.webkitGetAsEntry()}else if(typeof file.getAsFile==="function"){_this.handleFile(file.getAsFile());i++;loopFiles()}else if(File&&file){file.fullPath=file.name;file.extension=getExtension(file.name);_this.handleFile(file);i++;loopFiles()}else{_this.updateCounter(-1);i++;loopFiles()}if(!entry_1){_this.updateCounter(-1);i++;loopFiles()}else if(entry_1.isFile){entry_1.file(function(fileEntry){var finalFile=Object.assign(fileEntry,{fullPath:entry_1.fullPath,extension:getExtension(entry_1.name)});_this.handleFile(finalFile);i++;loopFiles()},function(err){void 0})}else if(entry_1.isDirectory){reader=entry_1.createReader();reader.readEntries(function(entries){_this.parseFiles(entries);_this.updateCounter(-1);i++;loopFiles()},function(err){void 0})}}};loopFiles()};return FilesScannerSingleton}();var FilesScanner=FilesScannerSingleton.getInstance();var SettingsSingleton=function(){function SettingsSingleton(){this.settings={theme:"theme-light"}}SettingsSingleton.getInstance=function(){if(!SettingsSingleton.instance){SettingsSingleton.instance=new SettingsSingleton}return SettingsSingleton.instance};SettingsSingleton.prototype.init=function(){var _this=this;var $themeSelector=document.getElementById("theme-selector");$themeSelector.addEventListener("change",function(ev){var selectedTheme=ev.target.value;_this.settings.theme=selectedTheme;pubsub.publish(EVENTS.THEME_CHANGED,selectedTheme);document.querySelector("body").classList.remove("theme-dark");document.querySelector("body").classList.remove("theme-light");document.querySelector("body").classList.add(selectedTheme)})};SettingsSingleton.prototype.getSettings=function(){return this.settings};return SettingsSingleton}();var SettingsManager=SettingsSingleton.getInstance();var CodeWindow=function(){function CodeWindow(){this.lastScrollPosition=0}CodeWindow.getInstance=function(){if(!CodeWindow.instance){CodeWindow.instance=new CodeWindow}return CodeWindow.instance};CodeWindow.prototype.init=function(element){var _this=this;this.$element=element;pubsub.subscribe(EVENTS.INIT_VIEW,function(){_this.clearWindow();_this.displayInitialParsingInformations()});pubsub.subscribe(EVENTS.SOMETHING_SELECTED,function(selectedElement){_this.clearWindow();_this.addCodeBlock(selectedElement.file);selectedElement.getInRelations().forEach(function(relation){_this.addCodeBlock(relation.from.file)})});pubsub.subscribe(EVENTS.THEME_CHANGED,function(theme){var codeBlocks=document.querySelectorAll("py-codeblock-rennesjs");codeBlocks.forEach(function(codeBlock){codeBlock.updateTheme(theme)})});pubsub.subscribe(EVENTS.NAVIGATIONBAR_ONUPDATE,function(item){if(item&&item.type==="overview"){_this.clearWindow()}})};CodeWindow.prototype.displayInitialParsingInformations=function(){var lines=0;var files=FilesParser.getParsedFiles();files.forEach(function(file){lines+=file.sloc.total});this.addCodeBlock({name:"Last scan",sourcecode:"Last indexed: "+dayjs_min().format("DD-MM-YYYY HH:mm:ss")+"\n\n"+files.length+" files\n\n"+lines+" lines of code"})};CodeWindow.prototype.addCodeBlock=function(file){var $codeBlock=document.createElement("py-codeblock");$codeBlock.setAttribute("filename",file.name);$codeBlock.setAttribute("code",file.sourcecode);$codeBlock.setAttribute("language",file.language);$codeBlock.setAttribute("codemirror-path","scripts/codemirror.js");$codeBlock.setAttribute("theme",SettingsManager.getSettings().theme);$codeBlock.addEventListener(EVENTS.CODEBLOCK_MAXIMIZED,this.onCodeblockMaximized.bind(this));$codeBlock.addEventListener(EVENTS.CODEBLOCK_UNMAXIMIZED,this.onCodeblockUnmaximized.bind(this));$codeBlock.addEventListener(EVENTS.CODEBLOCK_STATEMENT_CLICKED,this.onCodeblockStatementClicked.bind(this));this.$element.appendChild($codeBlock)};CodeWindow.prototype.clearWindow=function(){while(this.$element.firstChild){this.$element.firstChild.remove()}};CodeWindow.prototype.onCodeblockMaximized=function(){this.$element.classList.add("codeblock-maximized");this.lastScrollPosition=this.$element.scrollTop;this.$element.scrollTop=0};CodeWindow.prototype.onCodeblockUnmaximized=function(){this.$element.classList.remove("codeblock-maximized");this.$element.scrollTop=this.lastScrollPosition};CodeWindow.prototype.onCodeblockStatementClicked=function(ev){pubsub.publish(EVENTS.CODEBLOCK_STATEMENT_CLICKED)};return CodeWindow}();var CodeWindowManager=CodeWindow.getInstance();var DemosSingleton=function(){function DemosSingleton(){}DemosSingleton.getInstance=function(){if(!DemosSingleton.instance){DemosSingleton.instance=new DemosSingleton}return DemosSingleton.instance};DemosSingleton.prototype.init=function(){var _this=this;var PYTHEAS_CONTEXT=window.PYTHEAS_CONTEXT;if(PYTHEAS_CONTEXT&&PYTHEAS_CONTEXT!=="vscode"){fetch("./demos/demos.json").then(function(response){return response.json()}).then(function(data){_this.demosData=data}).catch(function(error){})}};DemosSingleton.prototype.getDemoProjectFiles=function(project){var resolvedFiles=[];var filesToResolve=this.demosData[project];var i=0;var len=filesToResolve.length;StatusbarManager.displayMessage(MESSAGES.DOWNLOADING_DEMOS,true);return new Promise(function(resolve,reject){var resolveFile=function(){return fetch("./demos/"+project+"/"+filesToResolve[i]).then(function(response){return response.text()}).then(function(dataFile){if(isFileSupported(getExtension(filesToResolve[i]))){resolvedFiles.push({path:filesToResolve[i],data:dataFile})}if(i<len-1){i++;return resolveFile()}else{return resolvedFiles}}).catch(function(error){})};resolveFile().then(function(files){resolve(files)}).catch(function(error){reject("Error with fetch: "+error.message)})})};return DemosSingleton}();var DemosManager=DemosSingleton.getInstance();var DropWindow=function(){function DropWindow(){this.dropped=false}DropWindow.getInstance=function(){if(!DropWindow.instance){DropWindow.instance=new DropWindow}return DropWindow.instance};DropWindow.prototype.init=function(){var _this=this;var PYTHEAS_CONTEXT=window.PYTHEAS_CONTEXT;if(PYTHEAS_CONTEXT&&PYTHEAS_CONTEXT!=="vscode"){document.querySelector("#welcome-folder-selector").addEventListener("change",function(ev){pubsub.publish(EVENTS.FILES_COMING);FilesScanner.scanFilesFromBrowser(ev).then(function(scannedFiles){FilesReader.readFilesFromBrowser(scannedFiles).then(function(readedFiles){FilesParser.parseFiles(readedFiles).then(function(parsedFiles){pubsub.publish(EVENTS.FILES_PARSED,parsedFiles)})})})});document.querySelector("#demo-projects-selector").addEventListener("change",function(ev){pubsub.publish(EVENTS.FILES_COMING);var project=ev.target.value;DemosManager.getDemoProjectFiles(project).then(function(scannedFiles){FilesReader.readFilesFromFetchCall(scannedFiles).then(function(readedFiles){FilesParser.parseFiles(readedFiles).then(function(parsedFiles){pubsub.publish(EVENTS.FILES_PARSED,parsedFiles)})})})});document.addEventListener("drop",function(ev){ev.preventDefault();_this.dropped=true;pubsub.publish(EVENTS.FILES_COMING);FilesScanner.scanFilesFromBrowser(ev).then(function(scannedFiles){FilesReader.readFilesFromBrowser(scannedFiles).then(function(readedFiles){FilesParser.parseFiles(readedFiles).then(function(parsedFiles){pubsub.publish(EVENTS.FILES_PARSED,parsedFiles)})})})});document.addEventListener("dragover",function(event){event.preventDefault()});if(typeof require!=="undefined"){var ipc=require("electron").ipcRenderer;ipc.on("folder-selected",function(event,path){FilesScanner.scanFilesFromElectron(path).then(function(scannedFiles){FilesReader.readFilesFromElectron(scannedFiles).then(function(readedFiles){FilesParser.parseFiles(readedFiles).then(function(parsedFiles){pubsub.publish(EVENTS.FILES_PARSED,parsedFiles)})})})})}}else if(PYTHEAS_CONTEXT&&PYTHEAS_CONTEXT==="vscode"){window.addEventListener("message",function(event){var message=event.data;switch(message.command){case"readedFiles":FilesParser.parseFiles(message.files).then(function(parsedFiles){pubsub.publish(EVENTS.FILES_PARSED,parsedFiles)});break}})}};DropWindow.prototype.test=function(){return this.dropped};return DropWindow}();var DropWindowManager=DropWindow.getInstance();var domToImage=createCommonjsModule(function(module){(function(global){var util=newUtil();var inliner=newInliner();var fontFaces=newFontFaces();var images=newImages();var defaultOptions={imagePlaceholder:undefined,cacheBust:false};var domtoimage={toSvg:toSvg,toPng:toPng,toJpeg:toJpeg,toBlob:toBlob,toPixelData:toPixelData,impl:{fontFaces:fontFaces,images:images,util:util,inliner:inliner,options:{}}};module.exports=domtoimage;function toSvg(node,options){options=options||{};copyOptions(options);return Promise.resolve(node).then(function(node){return cloneNode(node,options.filter,true)}).then(embedFonts).then(inlineImages).then(applyOptions).then(function(clone){return makeSvgDataUri(clone,options.width||util.width(node),options.height||util.height(node))});function applyOptions(clone){if(options.bgcolor)clone.style.backgroundColor=options.bgcolor;if(options.width)clone.style.width=options.width+"px";if(options.height)clone.style.height=options.height+"px";if(options.style)Object.keys(options.style).forEach(function(property){clone.style[property]=options.style[property]});return clone}}function toPixelData(node,options){return draw(node,options||{}).then(function(canvas){return canvas.getContext("2d").getImageData(0,0,util.width(node),util.height(node)).data})}function toPng(node,options){return draw(node,options||{}).then(function(canvas){return canvas.toDataURL()})}function toJpeg(node,options){options=options||{};return draw(node,options).then(function(canvas){return canvas.toDataURL("image/jpeg",options.quality||1)})}function toBlob(node,options){return draw(node,options||{}).then(util.canvasToBlob)}function copyOptions(options){if(typeof options.imagePlaceholder==="undefined"){domtoimage.impl.options.imagePlaceholder=defaultOptions.imagePlaceholder}else{domtoimage.impl.options.imagePlaceholder=options.imagePlaceholder}if(typeof options.cacheBust==="undefined"){domtoimage.impl.options.cacheBust=defaultOptions.cacheBust}else{domtoimage.impl.options.cacheBust=options.cacheBust}}function draw(domNode,options){return toSvg(domNode,options).then(util.makeImage).then(util.delay(100)).then(function(image){var canvas=newCanvas(domNode);canvas.getContext("2d").drawImage(image,0,0);return canvas});function newCanvas(domNode){var canvas=document.createElement("canvas");canvas.width=options.width||util.width(domNode);canvas.height=options.height||util.height(domNode);if(options.bgcolor){var ctx=canvas.getContext("2d");ctx.fillStyle=options.bgcolor;ctx.fillRect(0,0,canvas.width,canvas.height)}return canvas}}function cloneNode(node,filter,root){if(!root&&filter&&!filter(node))return Promise.resolve();return Promise.resolve(node).then(makeNodeCopy).then(function(clone){return cloneChildren(node,clone,filter)}).then(function(clone){return processClone(node,clone)});function makeNodeCopy(node){if(node instanceof HTMLCanvasElement)return util.makeImage(node.toDataURL());return node.cloneNode(false)}function cloneChildren(original,clone,filter){var children=original.childNodes;if(children.length===0)return Promise.resolve(clone);return cloneChildrenInOrder(clone,util.asArray(children),filter).then(function(){return clone});function cloneChildrenInOrder(parent,children,filter){var done=Promise.resolve();children.forEach(function(child){done=done.then(function(){return cloneNode(child,filter)}).then(function(childClone){if(childClone)parent.appendChild(childClone)})});return done}}function processClone(original,clone){if(!(clone instanceof Element))return clone;return Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then(function(){return clone});function cloneStyle(){copyStyle(window.getComputedStyle(original),clone.style);function copyStyle(source,target){if(source.cssText)target.cssText=source.cssText;else copyProperties(source,target);function copyProperties(source,target){util.asArray(source).forEach(function(name){target.setProperty(name,source.getPropertyValue(name),source.getPropertyPriority(name))})}}}function clonePseudoElements(){[":before",":after"].forEach(function(element){clonePseudoElement(element)});function clonePseudoElement(element){var style=window.getComputedStyle(original,element);var content=style.getPropertyValue("content");if(content===""||content==="none")return;var className=util.uid();clone.className=clone.className+" "+className;var styleElement=document.createElement("style");styleElement.appendChild(formatPseudoElementStyle(className,element,style));clone.appendChild(styleElement);function formatPseudoElementStyle(className,element,style){var selector="."+className+":"+element;var cssText=style.cssText?formatCssText(style):formatCssProperties(style);return document.createTextNode(selector+"{"+cssText+"}");function formatCssText(style){var content=style.getPropertyValue("content");return style.cssText+" content: "+content+";"}function formatCssProperties(style){return util.asArray(style).map(formatProperty).join("; ")+";";function formatProperty(name){return name+": "+style.getPropertyValue(name)+(style.getPropertyPriority(name)?" !important":"")}}}}}function copyUserInput(){if(original instanceof HTMLTextAreaElement)clone.innerHTML=original.value;if(original instanceof HTMLInputElement)clone.setAttribute("value",original.value)}function fixSvg(){if(!(clone instanceof SVGElement))return;clone.setAttribute("xmlns","http://www.w3.org/2000/svg");if(!(clone instanceof SVGRectElement))return;["width","height"].forEach(function(attribute){var value=clone.getAttribute(attribute);if(!value)return;clone.style.setProperty(attribute,value)})}}}function embedFonts(node){return fontFaces.resolveAll().then(function(cssText){var styleNode=document.createElement("style");node.appendChild(styleNode);styleNode.appendChild(document.createTextNode(cssText));return node})}function inlineImages(node){return images.inlineAll(node).then(function(){return node})}function makeSvgDataUri(node,width,height){return Promise.resolve(node).then(function(node){node.setAttribute("xmlns","http://www.w3.org/1999/xhtml");return(new XMLSerializer).serializeToString(node)}).then(util.escapeXhtml).then(function(xhtml){return'<foreignObject x="0" y="0" width="100%" height="100%">'+xhtml+"</foreignObject>"}).then(function(foreignObject){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+width+'" height="'+height+'">'+foreignObject+"</svg>"}).then(function(svg){return"data:image/svg+xml;charset=utf-8,"+svg})}function newUtil(){return{escape:escape,parseExtension:parseExtension,mimeType:mimeType,dataAsUrl:dataAsUrl,isDataUrl:isDataUrl,canvasToBlob:canvasToBlob,resolveUrl:resolveUrl,getAndEncode:getAndEncode,uid:uid(),delay:delay,asArray:asArray,escapeXhtml:escapeXhtml,makeImage:makeImage,width:width,height:height};function mimes(){var WOFF="application/font-woff";var JPEG="image/jpeg";return{woff:WOFF,woff2:WOFF,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:JPEG,jpeg:JPEG,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function parseExtension(url){var match=/\.([^\.\/]*?)$/g.exec(url);if(match)return match[1];else return""}function mimeType(url){var extension=parseExtension(url).toLowerCase();return mimes()[extension]||""}function isDataUrl(url){return url.search(/^(data:)/)!==-1}function toBlob(canvas){return new Promise(function(resolve){var binaryString=window.atob(canvas.toDataURL().split(",")[1]);var length=binaryString.length;var binaryArray=new Uint8Array(length);for(var i=0;i<length;i++)binaryArray[i]=binaryString.charCodeAt(i);resolve(new Blob([binaryArray],{type:"image/png"}))})}function canvasToBlob(canvas){if(canvas.toBlob)return new Promise(function(resolve){canvas.toBlob(resolve)});return toBlob(canvas)}function resolveUrl(url,baseUrl){var doc=document.implementation.createHTMLDocument();var base=doc.createElement("base");doc.head.appendChild(base);var a=doc.createElement("a");doc.body.appendChild(a);base.href=baseUrl;a.href=url;return a.href}function uid(){var index=0;return function(){return"u"+fourRandomChars()+index++;function fourRandomChars(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function makeImage(uri){return new Promise(function(resolve,reject){var image=new Image;image.onload=function(){resolve(image)};image.onerror=reject;image.src=uri})}function getAndEncode(url){var TIMEOUT=3e4;if(domtoimage.impl.options.cacheBust){url+=(/\?/.test(url)?"&":"?")+(new Date).getTime()}return new Promise(function(resolve){var request=new XMLHttpRequest;request.onreadystatechange=done;request.ontimeout=timeout;request.responseType="blob";request.timeout=TIMEOUT;request.open("GET",url,true);request.send();var placeholder;if(domtoimage.impl.options.imagePlaceholder){var split=domtoimage.impl.options.imagePlaceholder.split(/,/);if(split&&split[1]){placeholder=split[1]}}function done(){if(request.readyState!==4)return;if(request.status!==200){if(placeholder){resolve(placeholder)}else{fail("cannot fetch resource: "+url+", status: "+request.status)}return}var encoder=new FileReader;encoder.onloadend=function(){var content=encoder.result.split(/,/)[1];resolve(content)};encoder.readAsDataURL(request.response)}function timeout(){if(placeholder){resolve(placeholder)}else{fail("timeout of "+TIMEOUT+"ms occured while fetching resource: "+url)}}function fail(message){void 0;resolve("")}})}function dataAsUrl(content,type){return"data:"+type+";base64,"+content}function escape(string){return string.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function delay(ms){return function(arg){return new Promise(function(resolve){setTimeout(function(){resolve(arg)},ms)})}}function asArray(arrayLike){var array=[];var length=arrayLike.length;for(var i=0;i<length;i++)array.push(arrayLike[i]);return array}function escapeXhtml(string){return string.replace(/#/g,"%23").replace(/\n/g,"%0A")}function width(node){var leftBorder=px(node,"border-left-width");var rightBorder=px(node,"border-right-width");return node.scrollWidth+leftBorder+rightBorder}function height(node){var topBorder=px(node,"border-top-width");var bottomBorder=px(node,"border-bottom-width");return node.scrollHeight+topBorder+bottomBorder}function px(node,styleProperty){var value=window.getComputedStyle(node).getPropertyValue(styleProperty);return parseFloat(value.replace("px",""))}}function newInliner(){var URL_REGEX=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:inlineAll,shouldProcess:shouldProcess,impl:{readUrls:readUrls,inline:inline}};function shouldProcess(string){return string.search(URL_REGEX)!==-1}function readUrls(string){var result=[];var match;while((match=URL_REGEX.exec(string))!==null){result.push(match[1])}return result.filter(function(url){return!util.isDataUrl(url)})}function inline(string,url,baseUrl,get){return Promise.resolve(url).then(function(url){return baseUrl?util.resolveUrl(url,baseUrl):url}).then(get||util.getAndEncode).then(function(data){return util.dataAsUrl(data,util.mimeType(url))}).then(function(dataUrl){return string.replace(urlAsRegex(url),"$1"+dataUrl+"$3")});function urlAsRegex(url){return new RegExp("(url\\(['\"]?)("+util.escape(url)+")(['\"]?\\))","g")}}function inlineAll(string,baseUrl,get){if(nothingToInline())return Promise.resolve(string);return Promise.resolve(string).then(readUrls).then(function(urls){var done=Promise.resolve(string);urls.forEach(function(url){done=done.then(function(string){return inline(string,url,baseUrl,get)})});return done});function nothingToInline(){return!shouldProcess(string)}}}function newFontFaces(){return{resolveAll:resolveAll,impl:{readAll:readAll}};function resolveAll(){return readAll().then(function(webFonts){return Promise.all(webFonts.map(function(webFont){return webFont.resolve()}))}).then(function(cssStrings){return cssStrings.join("\n")})}function readAll(){return Promise.resolve(util.asArray(document.styleSheets)).then(getCssRules).then(selectWebFontRules).then(function(rules){return rules.map(newWebFont)});function selectWebFontRules(cssRules){return cssRules.filter(function(rule){return rule.type===CSSRule.FONT_FACE_RULE}).filter(function(rule){return inliner.shouldProcess(rule.style.getPropertyValue("src"))})}function getCssRules(styleSheets){var cssRules=[];styleSheets.forEach(function(sheet){try{util.asArray(sheet.cssRules||[]).forEach(cssRules.push.bind(cssRules))}catch(e){void 0}});return cssRules}function newWebFont(webFontRule){return{resolve:function resolve(){var baseUrl=(webFontRule.parentStyleSheet||{}).href;return inliner.inlineAll(webFontRule.cssText,baseUrl)},src:function(){return webFontRule.style.getPropertyValue("src")}}}}}function newImages(){return{inlineAll:inlineAll,impl:{newImage:newImage}};function newImage(element){return{inline:inline};function inline(get){if(util.isDataUrl(element.src))return Promise.resolve();return Promise.resolve(element.src).then(get||util.getAndEncode).then(function(data){return util.dataAsUrl(data,util.mimeType(element.src))}).then(function(dataUrl){return new Promise(function(resolve,reject){element.onload=resolve;element.onerror=reject;element.src=dataUrl})})}}function inlineAll(node){if(!(node instanceof Element))return Promise.resolve(node);return inlineBackground(node).then(function(){if(node instanceof HTMLImageElement)return newImage(node).inline();else return Promise.all(util.asArray(node.childNodes).map(function(child){return inlineAll(child)}))});function inlineBackground(node){var background=node.style.getPropertyValue("background");if(!background)return Promise.resolve(node);return inliner.inlineAll(background).then(function(inlined){node.style.setProperty("background",inlined,node.style.getPropertyPriority("background"))}).then(function(){return node})}}}})()});var download=createCommonjsModule(function(module,exports){(function(root,factory){{module.exports=factory()}})(commonjsGlobal,function(){return function download(data,strFileName,strMimeType){var self=window,defaultMime="application/octet-stream",mimeType=strMimeType||defaultMime,payload=data,url=!strFileName&&!strMimeType&&payload,anchor=document.createElement("a"),toString=function(a){return String(a)},myBlob=self.Blob||self.MozBlob||self.WebKitBlob||toString,fileName=strFileName||"download",blob,reader;myBlob=myBlob.call?myBlob.bind(self):Blob;if(String(this)==="true"){payload=[payload,mimeType];mimeType=payload[0];payload=payload[1]}if(url&&url.length<2048){fileName=url.split("/").pop().split("?")[0];anchor.href=url;if(anchor.href.indexOf(url)!==-1){var ajax=new XMLHttpRequest;ajax.open("GET",url,true);ajax.responseType="blob";ajax.onload=function(e){download(e.target.response,fileName,defaultMime)};setTimeout(function(){ajax.send()},0);return ajax}}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(payload)){if(payload.length>1024*1024*1.999&&myBlob!==toString){payload=dataUrlToBlob(payload);mimeType=payload.type||defaultMime}else{return navigator.msSaveBlob?navigator.msSaveBlob(dataUrlToBlob(payload),fileName):saver(payload)}}else{if(/([\x80-\xff])/.test(payload)){var i=0,tempUiArr=new Uint8Array(payload.length),mx=tempUiArr.length;for(i;i<mx;++i)tempUiArr[i]=payload.charCodeAt(i);payload=new myBlob([tempUiArr],{type:mimeType})}}blob=payload instanceof myBlob?payload:new myBlob([payload],{type:mimeType});function dataUrlToBlob(strUrl){var parts=strUrl.split(/[:;,]/),type=parts[1],decoder=parts[2]=="base64"?atob:decodeURIComponent,binData=decoder(parts.pop()),mx=binData.length,i=0,uiArr=new Uint8Array(mx);for(i;i<mx;++i)uiArr[i]=binData.charCodeAt(i);return new myBlob([uiArr],{type:type})}function saver(url,winMode){if("download"in anchor){anchor.href=url;anchor.setAttribute("download",fileName);anchor.className="download-js-link";anchor.innerHTML="downloading...";anchor.style.display="none";document.body.appendChild(anchor);setTimeout(function(){anchor.click();document.body.removeChild(anchor);if(winMode===true){setTimeout(function(){self.URL.revokeObjectURL(anchor.href)},250)}},66);return true}if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent)){if(/^data:/.test(url))url="data:"+url.replace(/^data:([\w\/\-\+]+)/,defaultMime);if(!window.open(url)){if(confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")){location.href=url}}return true}var f=document.createElement("iframe");document.body.appendChild(f);if(!winMode&&/^data:/.test(url)){url="data:"+url.replace(/^data:([\w\/\-\+]+)/,defaultMime)}f.src=url;setTimeout(function(){document.body.removeChild(f)},333)}if(navigator.msSaveBlob){return navigator.msSaveBlob(blob,fileName)}if(self.URL){saver(self.URL.createObjectURL(blob),true)}else{if(typeof blob==="string"||blob.constructor===toString){try{return saver("data:"+mimeType+";base64,"+self.btoa(blob))}catch(y){return saver("data:"+mimeType+","+encodeURIComponent(blob))}}reader=new FileReader;reader.onload=function(e){saver(this.result)};reader.readAsDataURL(blob)}return true}})});var wheel=addWheelListener;var addWheelListener_1=addWheelListener;var removeWheelListener_1=removeWheelListener;var prefix="",_addEventListener,_removeEventListener,support;detectEventModel(typeof window!=="undefined"&&window,typeof document!=="undefined"&&document);function addWheelListener(elem,callback,useCapture){_addWheelListener(elem,support,callback,useCapture);if(support=="DOMMouseScroll"){_addWheelListener(elem,"MozMousePixelScroll",callback,useCapture)}}function removeWheelListener(elem,callback,useCapture){_removeWheelListener(elem,support,callback,useCapture);if(support=="DOMMouseScroll"){_removeWheelListener(elem,"MozMousePixelScroll",callback,useCapture)}}function _addWheelListener(elem,eventName,callback,useCapture){elem[_addEventListener](prefix+eventName,support=="wheel"?callback:function(originalEvent){!originalEvent&&(originalEvent=window.event);var event={originalEvent:originalEvent,target:originalEvent.target||originalEvent.srcElement,type:"wheel",deltaMode:originalEvent.type=="MozMousePixelScroll"?0:1,deltaX:0,deltaY:0,deltaZ:0,clientX:originalEvent.clientX,clientY:originalEvent.clientY,preventDefault:function(){originalEvent.preventDefault?originalEvent.preventDefault():originalEvent.returnValue=false},stopPropagation:function(){if(originalEvent.stopPropagation)originalEvent.stopPropagation()},stopImmediatePropagation:function(){if(originalEvent.stopImmediatePropagation)originalEvent.stopImmediatePropagation()}};if(support=="mousewheel"){event.deltaY=-1/40*originalEvent.wheelDelta;originalEvent.wheelDeltaX&&(event.deltaX=-1/40*originalEvent.wheelDeltaX)}else{event.deltaY=originalEvent.detail}return callback(event)},useCapture||false)}function _removeWheelListener(elem,eventName,callback,useCapture){elem[_removeEventListener](prefix+eventName,callback,useCapture||false)}function detectEventModel(window,document){if(window&&window.addEventListener){_addEventListener="addEventListener";_removeEventListener="removeEventListener"}else{_addEventListener="attachEvent";_removeEventListener="detachEvent";prefix="on"}if(document){support="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll"}else{support="wheel"}}wheel.addWheelListener=addWheelListener_1;wheel.removeWheelListener=removeWheelListener_1;var NEWTON_ITERATIONS=4;var NEWTON_MIN_SLOPE=.001;var SUBDIVISION_PRECISION=1e-7;var SUBDIVISION_MAX_ITERATIONS=10;var kSplineTableSize=11;var kSampleStepSize=1/(kSplineTableSize-1);var float32ArraySupported=typeof Float32Array==="function";function A(aA1,aA2){return 1-3*aA2+3*aA1}function B(aA1,aA2){return 3*aA2-6*aA1}function C(aA1){return 3*aA1}function calcBezier(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT}function getSlope(aT,aA1,aA2){return 3*A(aA1,aA2)*aT*aT+2*B(aA1,aA2)*aT+C(aA1)}function binarySubdivide(aX,aA,aB,mX1,mX2){var currentX,currentT,i=0;do{currentT=aA+(aB-aA)/2;currentX=calcBezier(currentT,mX1,mX2)-aX;if(currentX>0){aB=currentT}else{aA=currentT}}while(Math.abs(currentX)>SUBDIVISION_PRECISION&&++i<SUBDIVISION_MAX_ITERATIONS);return currentT}function newtonRaphsonIterate(aX,aGuessT,mX1,mX2){for(var i=0;i<NEWTON_ITERATIONS;++i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(currentSlope===0){return aGuessT}var currentX=calcBezier(aGuessT,mX1,mX2)-aX;aGuessT-=currentX/currentSlope}return aGuessT}function LinearEasing(x){return x}var src=function bezier(mX1,mY1,mX2,mY2){if(!(0<=mX1&&mX1<=1&&0<=mX2&&mX2<=1)){throw new Error("bezier x values must be in [0, 1] range")}if(mX1===mY1&&mX2===mY2){return LinearEasing}var sampleValues=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize);for(var i=0;i<kSplineTableSize;++i){sampleValues[i]=calcBezier(i*kSampleStepSize,mX1,mX2)}function getTForX(aX){var intervalStart=0;var currentSample=1;var lastSample=kSplineTableSize-1;for(;currentSample!==lastSample&&sampleValues[currentSample]<=aX;++currentSample){intervalStart+=kSampleStepSize}--currentSample;var dist=(aX-sampleValues[currentSample])/(sampleValues[currentSample+1]-sampleValues[currentSample]);var guessForT=intervalStart+dist*kSampleStepSize;var initialSlope=getSlope(guessForT,mX1,mX2);if(initialSlope>=NEWTON_MIN_SLOPE){return newtonRaphsonIterate(aX,guessForT,mX1,mX2)}else if(initialSlope===0){return guessForT}else{return binarySubdivide(aX,intervalStart,intervalStart+kSampleStepSize,mX1,mX2)}}return function BezierEasing(x){if(x===0){return 0}if(x===1){return 1}return calcBezier(getTForX(x),mY1,mY2)}};var animations={ease:src(.25,.1,.25,1),easeIn:src(.42,0,1,1),easeOut:src(0,0,.58,1),easeInOut:src(.42,0,.58,1),linear:src(0,0,1,1)};var amator=animate;var makeAggregateRaf_1=makeAggregateRaf;var sharedScheduler=makeAggregateRaf();function animate(source,target,options){var start=Object.create(null);var diff=Object.create(null);options=options||{};var easing=typeof options.easing==="function"?options.easing:animations[options.easing];if(!easing){if(options.easing){void 0}easing=animations.ease}var step=typeof options.step==="function"?options.step:noop;var done=typeof options.done==="function"?options.done:noop;var scheduler=getScheduler(options.scheduler);var keys=Object.keys(target);keys.forEach(function(key){start[key]=source[key];diff[key]=target[key]-source[key]});var durationInMs=typeof options.duration==="number"?options.duration:400;var durationInFrames=Math.max(1,durationInMs*.06);var previousAnimationId;var frame=0;previousAnimationId=scheduler.next(loop);return{cancel:cancel};function cancel(){scheduler.cancel(previousAnimationId);previousAnimationId=0}function loop(){var t=easing(frame/durationInFrames);frame+=1;setValues(t);if(frame<=durationInFrames){previousAnimationId=scheduler.next(loop);step(source)}else{previousAnimationId=0;setTimeout(function(){done(source)},0)}}function setValues(t){keys.forEach(function(key){source[key]=diff[key]*t+start[key]})}}function noop(){}function getScheduler(scheduler){if(!scheduler){var canRaf=typeof window!=="undefined"&&window.requestAnimationFrame;return canRaf?rafScheduler():timeoutScheduler()}if(typeof scheduler.next!=="function")throw new Error("Scheduler is supposed to have next(cb) function");if(typeof scheduler.cancel!=="function")throw new Error("Scheduler is supposed to have cancel(handle) function");return scheduler}function rafScheduler(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function timeoutScheduler(){return{next:function(cb){return setTimeout(cb,1e3/60)},cancel:function(id){return clearTimeout(id)}}}function makeAggregateRaf(){var frontBuffer=new Set;var backBuffer=new Set;var frameToken=0;return{next:next,cancel:next,clearAll:clearAll};function clearAll(){frontBuffer.clear();backBuffer.clear();cancelAnimationFrame(frameToken);frameToken=0}function next(callback){backBuffer.add(callback);renderNextFrame()}function renderNextFrame(){if(!frameToken)frameToken=requestAnimationFrame(renderFrame)}function renderFrame(){frameToken=0;var t=backBuffer;backBuffer=frontBuffer;frontBuffer=t;frontBuffer.forEach(function(callback){callback()});frontBuffer.clear()}}amator.makeAggregateRaf=makeAggregateRaf_1;amator.sharedScheduler=sharedScheduler;var ngraph_events=function(subject){validateSubject(subject);var eventsStorage=createEventsStorage(subject);subject.on=eventsStorage.on;subject.off=eventsStorage.off;subject.fire=eventsStorage.fire;return subject};function createEventsStorage(subject){var registeredEvents=Object.create(null);return{on:function(eventName,callback,ctx){if(typeof callback!=="function"){throw new Error("callback is expected to be a function")}var handlers=registeredEvents[eventName];if(!handlers){handlers=registeredEvents[eventName]=[]}handlers.push({callback:callback,ctx:ctx});return subject},off:function(eventName,callback){var wantToRemoveAll=typeof eventName==="undefined";if(wantToRemoveAll){registeredEvents=Object.create(null);return subject}if(registeredEvents[eventName]){var deleteAllCallbacksForEvent=typeof callback!=="function";if(deleteAllCallbacksForEvent){delete registeredEvents[eventName]}else{var callbacks=registeredEvents[eventName];for(var i=0;i<callbacks.length;++i){if(callbacks[i].callback===callback){callbacks.splice(i,1)}}}}return subject},fire:function(eventName){var callbacks=registeredEvents[eventName];if(!callbacks){return subject}var fireArguments;if(arguments.length>1){fireArguments=Array.prototype.splice.call(arguments,1)}for(var i=0;i<callbacks.length;++i){var callbackInfo=callbacks[i];callbackInfo.callback.apply(callbackInfo.ctx,fireArguments)}return subject}}}function validateSubject(subject){if(!subject){throw new Error("Eventify cannot use falsy object as events subject")}var reservedWords=["on","fire","off"];for(var i=0;i<reservedWords.length;++i){if(subject.hasOwnProperty(reservedWords[i])){throw new Error("Subject cannot be eventified, since it already has property '"+reservedWords[i]+"'")}}}var kinetic_1=kinetic;function kinetic(getPoint,scroll,settings){if(typeof settings!=="object"){settings={}}var minVelocity=typeof settings.minVelocity==="number"?settings.minVelocity:5;var amplitude=typeof settings.amplitude==="number"?settings.amplitude:.25;var lastPoint;var timestamp;var timeConstant=342;var ticker;var vx,targetX,ax;var vy,targetY,ay;var raf;return{start:start,stop:stop,cancel:dispose};function dispose(){window.clearInterval(ticker);window.cancelAnimationFrame(raf)}function start(){lastPoint=getPoint();ax=ay=vx=vy=0;timestamp=new Date;window.clearInterval(ticker);window.cancelAnimationFrame(raf);ticker=window.setInterval(track,100)}function track(){var now=Date.now();var elapsed=now-timestamp;timestamp=now;var currentPoint=getPoint();var dx=currentPoint.x-lastPoint.x;var dy=currentPoint.y-lastPoint.y;lastPoint=currentPoint;var dt=1e3/(1+elapsed);vx=.8*dx*dt+.2*vx;vy=.8*dy*dt+.2*vy}function stop(){window.clearInterval(ticker);window.cancelAnimationFrame(raf);var currentPoint=getPoint();targetX=currentPoint.x;targetY=currentPoint.y;timestamp=Date.now();if(vx<-minVelocity||vx>minVelocity){ax=amplitude*vx;targetX+=ax}if(vy<-minVelocity||vy>minVelocity){ay=amplitude*vy;targetY+=ay}raf=window.requestAnimationFrame(autoScroll)}function autoScroll(){var elapsed=Date.now()-timestamp;var moving=false;var dx=0;var dy=0;if(ax){dx=-ax*Math.exp(-elapsed/timeConstant);if(dx>.5||dx<-.5)moving=true;else dx=ax=0}if(ay){dy=-ay*Math.exp(-elapsed/timeConstant);if(dy>.5||dy<-.5)moving=true;else dy=ay=0}if(moving){scroll(targetX+dx,targetY+dy);raf=window.requestAnimationFrame(autoScroll)}}}var textSelectionInterceptor=createTextSelectionInterceptor;function createTextSelectionInterceptor(){var dragObject;var prevSelectStart;var prevDragStart;return{capture:capture,release:release};function capture(domObject){prevSelectStart=window.document.onselectstart;prevDragStart=window.document.ondragstart;window.document.onselectstart=disabled;dragObject=domObject;dragObject.ondragstart=disabled}function release(){window.document.onselectstart=prevSelectStart;if(dragObject)dragObject.ondragstart=prevDragStart}}function disabled(e){e.stopPropagation();return false}var transform=Transform;function Transform(){this.x=0;this.y=0;this.scale=1}var svgController=makeSvgController;function makeSvgController(svgElement,options){var elementValid=svgElement instanceof SVGElement;if(!elementValid){throw new Error("svg element is required for svg.panzoom to work")}var owner=svgElement.ownerSVGElement;if(!owner){throw new Error("Do not apply panzoom to the root <svg> element. "+"Use its child instead (e.g. <g></g>). "+"As of March 2016 only FireFox supported transform on the root element")}if(!options.disableKeyboardInteraction){owner.setAttribute("tabindex",0)}var api={getBBox:getBBox,getScreenCTM:getScreenCTM,getOwner:getOwner,applyTransform:applyTransform,initTransform:initTransform};return api;function getOwner(){return owner}function getBBox(){var bbox=svgElement.getBBox();return{left:bbox.x,top:bbox.y,width:bbox.width,height:bbox.height}}function getScreenCTM(){return owner.getScreenCTM()}function initTransform(transform){var screenCTM=svgElement.getScreenCTM();transform.x=screenCTM.e;transform.y=screenCTM.f;transform.scale=screenCTM.a;owner.removeAttributeNS(null,"viewBox")}function applyTransform(transform){svgElement.setAttribute("transform","matrix("+transform.scale+" 0 0 "+transform.scale+" "+transform.x+" "+transform.y+")")}}var domController=makeDomController;function makeDomController(domElement,options){var elementValid=domElement instanceof HTMLElement;if(!elementValid){throw new Error("svg element is required for svg.panzoom to work")}var owner=domElement.parentElement;if(!owner){throw new Error("Do not apply panzoom to the detached DOM element. ")}domElement.scrollTop=0;if(!options.disableKeyboardInteraction){owner.setAttribute("tabindex",0)}var api={getBBox:getBBox,getOwner:getOwner,applyTransform:applyTransform};return api;function getOwner(){return owner}function getBBox(){return{left:0,top:0,width:domElement.clientWidth,height:domElement.clientHeight}}function applyTransform(transform){domElement.style.transformOrigin="0 0 0";domElement.style.transform="matrix("+transform.scale+", 0, 0, "+transform.scale+", "+transform.x+", "+transform.y+")"}}var preventTextSelection=textSelectionInterceptor();var defaultZoomSpeed=.065;var defaultDoubleTapZoomSpeed=1.75;var doubleTapSpeedInMS=300;var panzoom=createPanZoom;function createPanZoom(domElement,options){options=options||{};var panController=options.controller;if(!panController){if(domElement instanceof SVGElement){panController=svgController(domElement,options)}if(domElement instanceof HTMLElement){panController=domController(domElement,options)}}if(!panController){throw new Error("Cannot create panzoom for the current type of dom element")}var owner=panController.getOwner();var storedCTMResult={x:0,y:0};var isDirty=false;var transform$1=new transform;if(panController.initTransform){panController.initTransform(transform$1)}var filterKey=typeof options.filterKey==="function"?options.filterKey:noop$1;var pinchSpeed=typeof options.pinchSpeed==="number"?options.pinchSpeed:1;var bounds=options.bounds;var maxZoom=typeof options.maxZoom==="number"?options.maxZoom:Number.POSITIVE_INFINITY;var minZoom=typeof options.minZoom==="number"?options.minZoom:0;var boundsPadding=typeof options.boundsPadding==="number"?options.boundsPadding:.05;var zoomDoubleClickSpeed=typeof options.zoomDoubleClickSpeed==="number"?options.zoomDoubleClickSpeed:defaultDoubleTapZoomSpeed;var beforeWheel=options.beforeWheel||noop$1;var speed=typeof options.zoomSpeed==="number"?options.zoomSpeed:defaultZoomSpeed;validateBounds(bounds);if(options.autocenter){autocenter()}var frameAnimation;var lastTouchEndTime=0;var touchInProgress=false;var panstartFired=false;var mouseX;var mouseY;var pinchZoomLength;var smoothScroll;if("smoothScroll"in options&&!options.smoothScroll){smoothScroll=rigidScroll()}else{smoothScroll=kinetic_1(getPoint,scroll,options.smoothScroll)}var moveByAnimation;var zoomToAnimation;var multiTouch;var paused=false;listenForEvents();var api={dispose:dispose,moveBy:internalMoveBy,moveTo:moveTo,centerOn:centerOn,zoomTo:publicZoomTo,zoomAbs:zoomAbs,smoothZoom:smoothZoom,smoothZoomAbs:smoothZoomAbs,showRectangle:showRectangle,pause:pause,resume:resume,isPaused:isPaused,getTransform:getTransformModel,getMinZoom:getMinZoom,getMaxZoom:getMaxZoom};ngraph_events(api);return api;function pause(){releaseEvents();paused=true}function resume(){if(paused){listenForEvents();paused=false}}function isPaused(){return paused}function showRectangle(rect){var clientRect=owner.getBoundingClientRect();var size=transformToScreen(clientRect.width,clientRect.height);var rectWidth=rect.right-rect.left;var rectHeight=rect.bottom-rect.top;if(!Number.isFinite(rectWidth)||!Number.isFinite(rectHeight)){throw new Error("Invalid rectangle")}var dw=size.x/rectWidth;var dh=size.y/rectHeight;var scale=Math.min(dw,dh);transform$1.x=-(rect.left+rectWidth/2)*scale+size.x/2;transform$1.y=-(rect.top+rectHeight/2)*scale+size.y/2;transform$1.scale=scale}function transformToScreen(x,y){if(panController.getScreenCTM){var parentCTM=panController.getScreenCTM();var parentScaleX=parentCTM.a;var parentScaleY=parentCTM.d;var parentOffsetX=parentCTM.e;var parentOffsetY=parentCTM.f;storedCTMResult.x=x*parentScaleX-parentOffsetX;storedCTMResult.y=y*parentScaleY-parentOffsetY}else{storedCTMResult.x=x;storedCTMResult.y=y}return storedCTMResult}function autocenter(){var w;var h;var left=0;var top=0;var sceneBoundingBox=getBoundingBox();if(sceneBoundingBox){left=sceneBoundingBox.left;top=sceneBoundingBox.top;w=sceneBoundingBox.right-sceneBoundingBox.left;h=sceneBoundingBox.bottom-sceneBoundingBox.top}else{var ownerRect=owner.getBoundingClientRect();w=ownerRect.width;h=ownerRect.height}var bbox=panController.getBBox();if(bbox.width===0||bbox.height===0){return}var dh=h/bbox.height;var dw=w/bbox.width;var scale=Math.min(dw,dh);transform$1.x=-(bbox.left+bbox.width/2)*scale+w/2+left;transform$1.y=-(bbox.top+bbox.height/2)*scale+h/2+top;transform$1.scale=scale}function getTransformModel(){return transform$1}function getMinZoom(){return minZoom}function getMaxZoom(){return maxZoom}function getPoint(){return{x:transform$1.x,y:transform$1.y}}function moveTo(x,y){transform$1.x=x;transform$1.y=y;keepTransformInsideBounds();triggerEvent("pan");makeDirty()}function moveBy(dx,dy){moveTo(transform$1.x+dx,transform$1.y+dy)}function keepTransformInsideBounds(){var boundingBox=getBoundingBox();if(!boundingBox)return;var adjusted=false;var clientRect=getClientRect();var diff=boundingBox.left-clientRect.right;if(diff>0){transform$1.x+=diff;adjusted=true}diff=boundingBox.right-clientRect.left;if(diff<0){transform$1.x+=diff;adjusted=true}diff=boundingBox.top-clientRect.bottom;if(diff>0){transform$1.y+=diff;adjusted=true}diff=boundingBox.bottom-clientRect.top;if(diff<0){transform$1.y+=diff;adjusted=true}return adjusted}function getBoundingBox(){if(!bounds)return;if(typeof bounds==="boolean"){var ownerRect=owner.getBoundingClientRect();var sceneWidth=ownerRect.width;var sceneHeight=ownerRect.height;return{left:sceneWidth*boundsPadding,top:sceneHeight*boundsPadding,right:sceneWidth*(1-boundsPadding),bottom:sceneHeight*(1-boundsPadding)}}return bounds}function getClientRect(){var bbox=panController.getBBox();var leftTop=client(bbox.left,bbox.top);return{left:leftTop.x,top:leftTop.y,right:bbox.width*transform$1.scale+leftTop.x,bottom:bbox.height*transform$1.scale+leftTop.y}}function client(x,y){return{x:x*transform$1.scale+transform$1.x,y:y*transform$1.scale+transform$1.y}}function makeDirty(){isDirty=true;frameAnimation=window.requestAnimationFrame(frame)}function zoomByRatio(clientX,clientY,ratio){if(isNaN(clientX)||isNaN(clientY)||isNaN(ratio)){throw new Error("zoom requires valid numbers")}var newScale=transform$1.scale*ratio;if(newScale<minZoom){if(transform$1.scale===minZoom)return;ratio=minZoom/transform$1.scale}if(newScale>maxZoom){if(transform$1.scale===maxZoom)return;ratio=maxZoom/transform$1.scale}var size=transformToScreen(clientX,clientY);transform$1.x=size.x-ratio*(size.x-transform$1.x);transform$1.y=size.y-ratio*(size.y-transform$1.y);if(bounds&&boundsPadding===1&&minZoom===1){transform$1.scale*=ratio;keepTransformInsideBounds()}else{var transformAdjusted=keepTransformInsideBounds();if(!transformAdjusted)transform$1.scale*=ratio}triggerEvent("zoom");makeDirty()}function zoomAbs(clientX,clientY,zoomLevel){var ratio=zoomLevel/transform$1.scale;zoomByRatio(clientX,clientY,ratio)}function centerOn(ui){var parent=ui.ownerSVGElement;if(!parent)throw new Error("ui element is required to be within the scene");var clientRect=ui.getBoundingClientRect();var cx=clientRect.left+clientRect.width/2;var cy=clientRect.top+clientRect.height/2;var container=parent.getBoundingClientRect();var dx=container.width/2-cx;var dy=container.height/2-cy;internalMoveBy(dx,dy,true)}function internalMoveBy(dx,dy,smooth){if(!smooth){return moveBy(dx,dy)}if(moveByAnimation)moveByAnimation.cancel();var from={x:0,y:0};var to={x:dx,y:dy};var lastX=0;var lastY=0;moveByAnimation=amator(from,to,{step:function(v){moveBy(v.x-lastX,v.y-lastY);lastX=v.x;lastY=v.y}})}function scroll(x,y){cancelZoomAnimation();moveTo(x,y)}function dispose(){releaseEvents()}function listenForEvents(){owner.addEventListener("mousedown",onMouseDown);owner.addEventListener("dblclick",onDoubleClick);owner.addEventListener("touchstart",onTouch);owner.addEventListener("keydown",onKeyDown);wheel.addWheelListener(owner,onMouseWheel);makeDirty()}function releaseEvents(){wheel.removeWheelListener(owner,onMouseWheel);owner.removeEventListener("mousedown",onMouseDown);owner.removeEventListener("keydown",onKeyDown);owner.removeEventListener("dblclick",onDoubleClick);owner.removeEventListener("touchstart",onTouch);if(frameAnimation){window.cancelAnimationFrame(frameAnimation);frameAnimation=0}smoothScroll.cancel();releaseDocumentMouse();releaseTouches();triggerPanEnd()}function frame(){if(isDirty)applyTransform()}function applyTransform(){isDirty=false;panController.applyTransform(transform$1);triggerEvent("transform");frameAnimation=0}function onKeyDown(e){var x=0,y=0,z=0;if(e.keyCode===38){y=1}else if(e.keyCode===40){y=-1}else if(e.keyCode===37){x=1}else if(e.keyCode===39){x=-1}else if(e.keyCode===189||e.keyCode===109){z=1}else if(e.keyCode===187||e.keyCode===107){z=-1}if(filterKey(e,x,y,z)){return}if(x||y){e.preventDefault();e.stopPropagation();var clientRect=owner.getBoundingClientRect();var offset=Math.min(clientRect.width,clientRect.height);var moveSpeedRatio=.05;var dx=offset*moveSpeedRatio*x;var dy=offset*moveSpeedRatio*y;internalMoveBy(dx,dy)}if(z){var scaleMultiplier=getScaleMultiplier(z);var ownerRect=owner.getBoundingClientRect();publicZoomTo(ownerRect.width/2,ownerRect.height/2,scaleMultiplier)}}function onTouch(e){beforeTouch(e);if(e.touches.length===1){return handleSingleFingerTouch(e,e.touches[0])}else if(e.touches.length===2){pinchZoomLength=getPinchZoomLength(e.touches[0],e.touches[1]);multiTouch=true;startTouchListenerIfNeeded()}}function beforeTouch(e){if(options.onTouch&&!options.onTouch(e)){return}e.stopPropagation();e.preventDefault()}function beforeDoubleClick(e){if(options.onDoubleClick&&!options.onDoubleClick(e)){return}e.preventDefault();e.stopPropagation()}function handleSingleFingerTouch(e){var touch=e.touches[0];var offset=getOffsetXY(touch);mouseX=offset.x;mouseY=offset.y;smoothScroll.cancel();startTouchListenerIfNeeded()}function startTouchListenerIfNeeded(){if(!touchInProgress){touchInProgress=true;document.addEventListener("touchmove",handleTouchMove);document.addEventListener("touchend",handleTouchEnd);document.addEventListener("touchcancel",handleTouchEnd)}}function handleTouchMove(e){if(e.touches.length===1){e.stopPropagation();var touch=e.touches[0];var offset=getOffsetXY(touch);var dx=offset.x-mouseX;var dy=offset.y-mouseY;if(dx!==0&&dy!==0){triggerPanStart()}mouseX=offset.x;mouseY=offset.y;var point=transformToScreen(dx,dy);internalMoveBy(point.x,point.y)}else if(e.touches.length===2){multiTouch=true;var t1=e.touches[0];var t2=e.touches[1];var currentPinchLength=getPinchZoomLength(t1,t2);var scaleMultiplier=1+(currentPinchLength/pinchZoomLength-1)*pinchSpeed;mouseX=(t1.clientX+t2.clientX)/2;mouseY=(t1.clientY+t2.clientY)/2;publicZoomTo(mouseX,mouseY,scaleMultiplier);pinchZoomLength=currentPinchLength;e.stopPropagation();e.preventDefault()}}function handleTouchEnd(e){if(e.touches.length>0){var offset=getOffsetXY(e.touches[0]);mouseX=offset.x;mouseY=offset.y}else{var now=new Date;if(now-lastTouchEndTime<doubleTapSpeedInMS){smoothZoom(mouseX,mouseY,zoomDoubleClickSpeed)}lastTouchEndTime=now;touchInProgress=false;triggerPanEnd();releaseTouches()}}function getPinchZoomLength(finger1,finger2){var dx=finger1.clientX-finger2.clientX;var dy=finger1.clientY-finger2.clientY;return Math.sqrt(dx*dx+dy*dy)}function onDoubleClick(e){beforeDoubleClick(e);var offset=getOffsetXY(e);smoothZoom(offset.x,offset.y,zoomDoubleClickSpeed)}function onMouseDown(e){if(touchInProgress){e.stopPropagation();return false}var isLeftButton=e.button===1&&window.event!==null||e.button===0;if(!isLeftButton)return;smoothScroll.cancel();var offset=getOffsetXY(e);var point=transformToScreen(offset.x,offset.y);mouseX=point.x;mouseY=point.y;document.addEventListener("mousemove",onMouseMove);document.addEventListener("mouseup",onMouseUp);if(!options.enableTextSelection){preventTextSelection.capture(e.target||e.srcElement)}return false}function onMouseMove(e){if(touchInProgress)return;triggerPanStart();var offset=getOffsetXY(e);var point=transformToScreen(offset.x,offset.y);var dx=point.x-mouseX;var dy=point.y-mouseY;mouseX=point.x;mouseY=point.y;internalMoveBy(dx,dy)}function onMouseUp(){if(!options.enableTextSelection){preventTextSelection.release()}triggerPanEnd();releaseDocumentMouse()}function releaseDocumentMouse(){document.removeEventListener("mousemove",onMouseMove);document.removeEventListener("mouseup",onMouseUp);panstartFired=false}function releaseTouches(){document.removeEventListener("touchmove",handleTouchMove);document.removeEventListener("touchend",handleTouchEnd);document.removeEventListener("touchcancel",handleTouchEnd);panstartFired=false;multiTouch=false}function onMouseWheel(e){if(beforeWheel(e))return;smoothScroll.cancel();var scaleMultiplier=getScaleMultiplier(e.deltaY);if(scaleMultiplier!==1){var offset=getOffsetXY(e);publicZoomTo(offset.x,offset.y,scaleMultiplier);e.preventDefault()}}function getOffsetXY(e){var offsetX,offsetY;var ownerRect=owner.getBoundingClientRect();offsetX=e.clientX-ownerRect.left;offsetY=e.clientY-ownerRect.top;return{x:offsetX,y:offsetY}}function smoothZoom(clientX,clientY,scaleMultiplier){var fromValue=transform$1.scale;var from={scale:fromValue};var to={scale:scaleMultiplier*fromValue};smoothScroll.cancel();cancelZoomAnimation();zoomToAnimation=amator(from,to,{step:function(v){zoomAbs(clientX,clientY,v.scale)},done:triggerZoomEnd})}function smoothZoomAbs(clientX,clientY,toScaleValue){var fromValue=transform$1.scale;var from={scale:fromValue};var to={scale:toScaleValue};smoothScroll.cancel();cancelZoomAnimation();zoomToAnimation=amator(from,to,{step:function(v){zoomAbs(clientX,clientY,v.scale)}})}function publicZoomTo(clientX,clientY,scaleMultiplier){smoothScroll.cancel();cancelZoomAnimation();return zoomByRatio(clientX,clientY,scaleMultiplier)}function cancelZoomAnimation(){if(zoomToAnimation){zoomToAnimation.cancel();zoomToAnimation=null}}function getScaleMultiplier(delta){var scaleMultiplier=1;if(delta>0){scaleMultiplier=1-speed}else if(delta<0){scaleMultiplier=1+speed}return scaleMultiplier}function triggerPanStart(){if(!panstartFired){triggerEvent("panstart");panstartFired=true;smoothScroll.start()}}function triggerPanEnd(){if(panstartFired){if(!multiTouch)smoothScroll.stop();triggerEvent("panend")}}function triggerZoomEnd(){triggerEvent("zoomend")}function triggerEvent(name){api.fire(name,api)}}function noop$1(){}function validateBounds(bounds){var boundsType=typeof bounds;if(boundsType==="undefined"||boundsType==="boolean")return;var validBounds=isNumber(bounds.left)&&isNumber(bounds.top)&&isNumber(bounds.bottom)&&isNumber(bounds.right);if(!validBounds)throw new Error("Bounds object is not valid. It can be: "+"undefined, boolean (true|false) or an object {left, top, right, bottom}")}function isNumber(x){return Number.isFinite(x)}function isNaN(value){if(Number.isNaN){return Number.isNaN(value)}return value!==value}function rigidScroll(){return{start:noop$1,stop:noop$1,cancel:noop$1}}function autoRun(){if(typeof document==="undefined")return;var scripts=document.getElementsByTagName("script");if(!scripts)return;var panzoomScript;for(var i=0;i<scripts.length;++i){var x=scripts[i];if(x.src&&x.src.match(/\bpanzoom(\.min)?\.js/)){panzoomScript=x;break}}if(!panzoomScript)return;var query=panzoomScript.getAttribute("query");if(!query)return;var globalName=panzoomScript.getAttribute("name")||"pz";var started=Date.now();tryAttach();function tryAttach(){var el=document.querySelector(query);if(!el){var now=Date.now();var elapsed=now-started;if(elapsed<2e3){setTimeout(tryAttach,100);return}void 0;return}var options=collectOptions(panzoomScript);void 0;window[globalName]=createPanZoom(el,options)}function collectOptions(script){var attrs=script.attributes;var options={};for(var i=0;i<attrs.length;++i){var attr=attrs[i];var nameValue=getPanzoomAttributeNameValue(attr);if(nameValue){options[nameValue.name]=nameValue.value}}return options}function getPanzoomAttributeNameValue(attr){if(!attr.name)return;var isPanZoomAttribute=attr.name[0]==="p"&&attr.name[1]==="z"&&attr.name[2]==="-";if(!isPanZoomAttribute)return;var name=attr.name.substr(3);var value=JSON.parse(attr.value);return{name:name,value:value}}}autoRun();var RelationTypes;(function(RelationTypes){RelationTypes["In"]="in";RelationTypes["Out"]="out"})(RelationTypes||(RelationTypes={}));var PyRelation=function(){function PyRelation(from,to,toType,type){this.type=type;this.from=from;this.to=to;this.toType=toType}return PyRelation}();var BasicTypes;(function(BasicTypes){BasicTypes[BasicTypes["number"]=0]="number";BasicTypes[BasicTypes["boolean"]=1]="boolean";BasicTypes[BasicTypes["string"]=2]="string";BasicTypes[BasicTypes["object"]=3]="object";BasicTypes[BasicTypes["date"]=4]="date";BasicTypes[BasicTypes["function"]=5]="function";BasicTypes[BasicTypes["Promise"]=6]="Promise"})(BasicTypes||(BasicTypes={}));var PyElement=function(){function PyElement(){this.relations=[];this.id=uniqId()}PyElement.prototype.hasRelation=function(from,to,type){var test=false;this.relations.forEach(function(relation){if(relation.from===from&&relation.to===to&&relation.type===type){test=true}});return test};PyElement.prototype.addRelation=function(from,to,toType,type){if(!this.hasRelation(from,to,type)&&to&&!(to in BasicTypes)){this.relations.push(new PyRelation(from,to,toType,type))}};PyElement.prototype.getInRelations=function(){return this.relations.filter(function(relation){return relation.type===RelationTypes.In})};PyElement.prototype.getOutRelations=function(){return this.relations.filter(function(relation){return relation.type===RelationTypes.Out})};return PyElement}();var __extends=window&&window.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var ECMAScriptConstructor=function(_super){__extends(ECMAScriptConstructor,_super);function ECMAScriptConstructor(propertyNode){return _super.call(this)||this}return ECMAScriptConstructor}(PyElement);var TsAstFinderSingleton=function(){function TsAstFinderSingleton(){}TsAstFinderSingleton.getInstance=function(){if(!TsAstFinderSingleton.instance){TsAstFinderSingleton.instance=new TsAstFinderSingleton}return TsAstFinderSingleton.instance};TsAstFinderSingleton.prototype.getName=function(node){return node.name.text};TsAstFinderSingleton.prototype.getExpressionName=function(node){return node.text};TsAstFinderSingleton.prototype.getType=function(node){if(node.elementType){return node.elementType.text}else if(node.typeArguments&&node.typeArguments.length>0){return node.typeArguments[0].text}else{return node.text}};TsAstFinderSingleton.prototype.getTypeKind=function(node){return node.kindName};return TsAstFinderSingleton}();var TsAstFinder=TsAstFinderSingleton.getInstance();var __extends$1=window&&window.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var ECMAScriptMethod=function(_super){__extends$1(ECMAScriptMethod,_super);function ECMAScriptMethod(methodNode){var _this=_super.call(this)||this;_this.kind="method";_this.name=TsAstFinder.getName(methodNode);if(methodNode.modifiers&&methodNode.modifiers.length>0){_this.modifiers=methodNode.modifiers.map(function(modifier){return ECMAScriptParser.getSyntaxKindName(modifier.kind)})}return _this}return ECMAScriptMethod}(PyElement);var __extends$2=window&&window.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var ECMAScriptNewExpression=function(_super){__extends$2(ECMAScriptNewExpression,_super);function ECMAScriptNewExpression(newExpressionNode){var _this=_super.call(this)||this;_this.kind="newExpression";_this.name=TsAstFinder.getExpressionName(newExpressionNode.expression);_this.type=_this.name;return _this}return ECMAScriptNewExpression}(PyElement);var __extends$3=window&&window.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var nodeToRange=function(node){if(typeof node.getStart==="function"&&typeof node.getEnd==="function"){return[node.getStart(),node.getEnd()]}else if(typeof node.pos!=="undefined"&&typeof node.end!=="undefined"){return[node.pos,node.end]}};var ECMAScriptProperty=function(_super){__extends$3(ECMAScriptProperty,_super);function ECMAScriptProperty(propertyNode,file){var _this=_super.call(this)||this;_this.kind="property";_this.name=TsAstFinder.getName(propertyNode);_this.positionRange=nodeToRange(propertyNode.name);if(propertyNode.type){_this.type=TsAstFinder.getType(propertyNode.type);_this.typeKind=TsAstFinder.getTypeKind(propertyNode.type)}if(propertyNode.modifiers&&propertyNode.modifiers.length>0){_this.modifiers=propertyNode.modifiers.map(function(modifier){return ECMAScriptParser.getSyntaxKindName(modifier.kind)})}return _this}return ECMAScriptProperty}(PyElement);var __extends$4=window&&window.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var ECMAScriptClass=function(_super){__extends$4(ECMAScriptClass,_super);function ECMAScriptClass(classeNode,file){var _this=_super.call(this)||this;_this.publicElements=[];_this.privateElements=[];if(!ECMAScriptParser.initialized){ECMAScriptParser.init()}_this.ast=classeNode;_this.file=file;_this.name=TsAstFinder.getName(classeNode);var propertyDeclarationsNodesForFile=ECMAScriptParser.getPropertyDeclaration(_this.ast);_this.propertyDeclarations=propertyDeclarationsNodesForFile.map(function(propertyDeclaration){return new ECMAScriptProperty(propertyDeclaration,_this.file)});var methodDeclarationsNodesForFile=ECMAScriptParser.getMethodDeclaration(_this.ast);_this.methodDeclarations=methodDeclarationsNodesForFile.map(function(methodDeclaration){return new ECMAScriptMethod(methodDeclaration)});var constructorNodeForFile=ECMAScriptParser.getConstructor(_this.ast);if(constructorNodeForFile.length>0){_this.constructorDeclaration=new ECMAScriptConstructor(constructorNodeForFile[0])}var newExpressionNodesForFile=ECMAScriptParser.getNewExpressions(_this.ast);if(newExpressionNodesForFile.length>0){newExpressionNodesForFile.forEach(function(newExpressionNode){var nexExpression=new ECMAScriptNewExpression(newExpressionNode);_this.addRelation(_this,nexExpression.type,nexExpression.typeKind,RelationTypes.Out)})}_this.propertyDeclarations.forEach(function(propertyDeclaration){_this.addRelation(_this,propertyDeclaration.type,propertyDeclaration.typeKind,RelationTypes.Out);if(propertyDeclaration.modifiers&&propertyDeclaration.modifiers.length>0){propertyDeclaration.modifiers.forEach(function(modifier){if(modifier==="PublicKeyword"){_this.publicElements.push(propertyDeclaration)}else if(modifier==="PrivateKeyword"){_this.privateElements.push(propertyDeclaration)}})}else{_this.publicElements.push(propertyDeclaration)}});_this.methodDeclarations.forEach(function(methodDeclaration){if(methodDeclaration.modifiers&&methodDeclaration.modifiers.length>0){methodDeclaration.modifiers.forEach(function(modifier){if(modifier==="PublicKeyword"){_this.publicElements.push(methodDeclaration)}else if(modifier==="PrivateKeyword"){_this.privateElements.push(methodDeclaration)}})}else{_this.publicElements.push(methodDeclaration)}});return _this}return ECMAScriptClass}(PyElement);var __extends$5=window&&window.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var JavaClass=function(_super){__extends$5(JavaClass,_super);function JavaClass(classeNode,file){var _this=_super.call(this)||this;_this.ast=classeNode;_this.file=file;_this.name=classeNode.IDENTIFIER().text;return _this}return JavaClass}(PyElement);var RelationSingleton=function(){function RelationSingleton(){}RelationSingleton.getInstance=function(){if(!RelationSingleton.instance){RelationSingleton.instance=new RelationSingleton}return RelationSingleton.instance};RelationSingleton.prototype.findInListByName=function(list,name){return list.find(function(el){return el.name===name})};RelationSingleton.prototype.mergeInRelations=function(elements){var _this=this;elements.map(function(element){if(element.relations&&element.relations.length>0){element.relations.forEach(function(relation){if(relation.type===RelationTypes.Out){var toElement=_this.findInListByName(elements,relation.to);if(toElement){toElement.addRelation(element,toElement,relation.toType,RelationTypes.In);relation.to=toElement}}})}})};return RelationSingleton}();var RelationManager=RelationSingleton.getInstance();var __spreadArrays=window&&window.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};var DataSingleton=function(){function DataSingleton(){this.database=new Set;this.filesToProcess=[];this.classes=[];this.functions=[]}DataSingleton.getInstance=function(){if(!DataSingleton.instance){DataSingleton.instance=new DataSingleton}return DataSingleton.instance};DataSingleton.prototype.init=function(parsedFiles){this.reset();this.filesToProcess=parsedFiles;this.processElements()};DataSingleton.prototype.reset=function(){this.filesToProcess=[];this.classes=[];this.functions=[]};DataSingleton.prototype.processElements=function(){var _this=this;this.filesToProcess.forEach(function(element){var classesNodesForFile=[];var functionsForFile=[];switch(element.extension){case"js":case"ts":classesNodesForFile=ECMAScriptParser.getClassDeclarations(element.ast);classesNodesForFile=classesNodesForFile.map(function(classeNode){return new ECMAScriptClass(classeNode,element)});functionsForFile=ECMAScriptParser.getFunctionDeclarations(element.ast);break;case"java":classesNodesForFile=JavaParser.getClassDeclarations(element.ast);classesNodesForFile=classesNodesForFile.map(function(classeNode){return new JavaClass(classeNode,element)});break;case"vue":classesNodesForFile=VueParser.getClassDeclarations(element.ast);break}if(classesNodesForFile.length>0){_this.classes=__spreadArrays(_this.classes,classesNodesForFile)}if(functionsForFile.length>0){_this.functions=__spreadArrays(_this.functions,functionsForFile)}});RelationManager.mergeInRelations(this.classes)};DataSingleton.prototype.getFiles=function(){return this.filesToProcess};DataSingleton.prototype.getClasses=function(){return this.classes};DataSingleton.prototype.getFunctions=function(){return this.functions};return DataSingleton}();var DataManager=DataSingleton.getInstance();function fadeElement(element,action){if(action!=="show"){setTimeout(function(){element.style.display="none"},200)}element.style.display="block";setTimeout(function(){element.style.opacity=1},30)}function isNotBatman(a,h){for(;a&&a!==document;a=a.parentNode){if(a.classList.contains(h.substr(1))){return 1}}}var ContextmenuSingleton=function(){function ContextmenuSingleton(){}ContextmenuSingleton.getInstance=function(){if(!ContextmenuSingleton.instance){ContextmenuSingleton.instance=new ContextmenuSingleton}return ContextmenuSingleton.instance};ContextmenuSingleton.prototype.init=function(){var _this=this;this.updateHost();document.addEventListener("mousedown",function(e){if(!isNotBatman(e.target,".jctx-host")&&document.querySelector("py-graph")){Array.from(document.querySelectorAll(".jctx")).forEach(function(x,i){fadeElement(x,"hide")})}});Array.from(document.querySelectorAll(".jctx li")).forEach(function(x,i){x.addEventListener("click",function(){if(!x.classList.contains("disabled")){_this.handleMenuAction(x.getAttribute("data-action"))}fadeElement(x.parentElement,"hide")})})};ContextmenuSingleton.prototype.handleMenuAction=function(evt){if(evt==="saveasimage"){pubsub.publish(EVENTS.SAVEGRAPHASIMAGE)}};ContextmenuSingleton.prototype.updateHost=function(){var graphContainer=document.querySelector(".graph-container");if(graphContainer&&document.querySelector("py-graph")){graphContainer.addEventListener("contextmenu",function(event){Array.from(document.querySelectorAll(".jctx")).forEach(function(k,i){k.style.display="none"});event.preventDefault();var mID="";Array.from(graphContainer.classList).forEach(function(y,i){if(~y.indexOf("jctx-id-")){mID="."+y}});var x=document.querySelector(".jctx"+mID);var maxLeft=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-10-x.getBoundingClientRect().width;var maxTop=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-10-x.getBoundingClientRect().height;fadeElement(x,"show");x.style.left=(event.pageX>maxLeft?maxLeft:event.pageX)+"px",x.style.top=(event.pageY>maxTop?maxTop:event.pageY)+"px"})}};return ContextmenuSingleton}();var ContextmenuManager=ContextmenuSingleton.getInstance();var GraphWindow=function(){function GraphWindow(){}GraphWindow.getInstance=function(){if(!GraphWindow.instance){GraphWindow.instance=new GraphWindow}return GraphWindow.instance};GraphWindow.prototype.init=function(element){var _this=this;this.$element=element;this.$graphContainer=element.querySelector(".graph-container");this.$graphContainerZoomable=element.querySelector(".graph-container__zoomable");this.initPanzoom();pubsub.subscribe(EVENTS.INIT_VIEW,function(data){_this.resetWindow();_this.displayInitView()});pubsub.subscribe(EVENTS.SAVEGRAPHASIMAGE,function(){_this.saveasimage()});pubsub.subscribe(EVENTS.SOMETHING_SELECTED,function(selectedElement){_this.resetWindow();_this.addGraph(selectedElement);ContextmenuManager.updateHost()});pubsub.subscribe(EVENTS.NAVIGATIONBAR_ONUPDATE,function(item){if(item){if(item.type==="overview"&&!item.subtype){_this.resetWindow();_this.displayInitView()}else if(item.type==="overview"&&item.subtype){if(_this.$graphOverview){_this.$graphOverview.selectType(item.subtype,false)}}}})};GraphWindow.prototype.resetWindow=function(){this.clearWindow();if(this.panZoomInstance){this.panZoomInstance.dispose()}this.initPanzoom()};GraphWindow.prototype.saveasimage=function(){var node=document.querySelector(".graph-container__zoomable");domToImage.toPng(node).then(function(dataUrl){download(dataUrl,"my-image.png","image/png")}).catch(function(error){void 0})};GraphWindow.prototype.initPanzoom=function(){var _this=this;var zoomPlusButton=document.querySelectorAll(".graph-controls__buttons button")[0];var zoomMinButton=document.querySelectorAll(".graph-controls__buttons button")[1];try{this.panZoomInstance=panzoom(this.$graphContainerZoomable,{maxZoom:1.25,minZoom:.25});this.panZoomMessage=document.querySelector(".graph-controls_level-message");zoomPlusButton.addEventListener("click",function(){var e=document.createEvent("HTMLEvents");e.keyCode=107;e.initEvent("keydown",false,true);_this.$graphContainer.dispatchEvent(e);_this.displayZoomLevel()});zoomMinButton.addEventListener("click",function(){var e=document.createEvent("HTMLEvents");e.keyCode=109;e.initEvent("keydown",false,true);_this.$graphContainer.dispatchEvent(e);_this.displayZoomLevel()})}catch(e){zoomPlusButton.style.display="none";zoomMinButton.style.display="none"}};GraphWindow.prototype.displayZoomLevel=function(){var _this=this;var scale=Math.ceil(this.panZoomInstance.getTransform().scale*100);this.panZoomMessage.style.display="block";this.panZoomMessage.innerHTML=scale+"%";setTimeout(function(){_this.panZoomMessage.style.display="none"},2e3)};GraphWindow.prototype.addGraph=function(element){this.$graph=document.createElement("py-graph");this.$graph.setAttribute("mxclient-path","scripts/mxgraph");this.$graph.data=element;this.$graph.addEventListener(EVENTS.GRAPH_ELEMENT_SELECTED,this.onGraphElementSelected.bind(this));this.$graph.addEventListener(EVENTS.GRAPH_SUBELEMENT_SELECTED,this.onGraphSubElementSelected.bind(this));this.$graphContainerZoomable.appendChild(this.$graph)};GraphWindow.prototype.clearWindow=function(){while(this.$graphContainerZoomable.firstChild){this.$graphContainerZoomable.firstChild.remove()}};GraphWindow.prototype.displayInitView=function(){this.$graphOverview=document.createElement("py-graph-overview");this.$graphOverview.data={file:DataManager.getFiles(),class:DataManager.getClasses(),function:DataManager.getFunctions()};this.$graphOverview.addEventListener(EVENTS.GRAPH_ELEMENT_SELECTED,this.onGraphElementSelected.bind(this));this.$graphOverview.addEventListener(EVENTS.GRAPH_OVERVIEW_DETAIL_SELECTED,this.onGraphOverviewDetailSelected.bind(this));this.$graphContainerZoomable.appendChild(this.$graphOverview)};GraphWindow.prototype.onGraphOverviewDetailSelected=function(ev){pubsub.publish(EVENTS.GRAPH_OVERVIEW_DETAIL_SELECTED,ev.detail)};GraphWindow.prototype.onGraphSubElementSelected=function(ev){void 0};GraphWindow.prototype.onGraphElementSelected=function(ev){void 0;pubsub.publish(EVENTS.GRAPH_ELEMENT_SELECTED,ev.detail)};return GraphWindow}();var GraphWindowManager=GraphWindow.getInstance();var WelcomeWindow=function(){function WelcomeWindow(){}WelcomeWindow.getInstance=function(){if(!WelcomeWindow.instance){WelcomeWindow.instance=new WelcomeWindow}return WelcomeWindow.instance};WelcomeWindow.prototype.init=function(element){var _this=this;this.$element=element;var PYTHEAS_CONTEXT=window.PYTHEAS_CONTEXT;if(PYTHEAS_CONTEXT&&PYTHEAS_CONTEXT==="vscode"){this.$element.parentElement.removeChild(this.$element)}else{pubsub.subscribe(EVENTS.FILES_COMING,function(){_this.hide()})}};WelcomeWindow.prototype.hide=function(){this.$element.style.display="none"};return WelcomeWindow}();var WelcomeWindowManager=WelcomeWindow.getInstance();var ContextSingleton=function(){function ContextSingleton(){}ContextSingleton.getInstance=function(){if(!ContextSingleton.instance){ContextSingleton.instance=new ContextSingleton}return ContextSingleton.instance};ContextSingleton.prototype.init=function(){var PYTHEAS_CONTEXT=window.PYTHEAS_CONTEXT;this.current_context=PYTHEAS_CONTEXT;if(this.current_context&&this.current_context==="vscode"){var body=document.querySelector("body");var hasDarkTheme=body.classList.contains("vscode-dark");var hasLightTheme=body.classList.contains("vscode-light");if(hasDarkTheme){pubsub.publish(EVENTS.THEME_CHANGED,"theme-dark")}if(hasLightTheme){pubsub.publish(EVENTS.THEME_CHANGED,"theme-light")}}};return ContextSingleton}();var ContextManager=ContextSingleton.getInstance();var NavigationBar=function(){function NavigationBar(){this.historyIndex=0}NavigationBar.getInstance=function(){if(!NavigationBar.instance){NavigationBar.instance=new NavigationBar}return NavigationBar.instance};NavigationBar.prototype.init=function(element){this.$element=element;this.initListeners()};NavigationBar.prototype.initListeners=function(){var _this=this;this.$element.addEventListener(EVENTS.NAVIGATIONBAR_BACK,function(){pubsub.publish(EVENTS.NAVIGATIONBAR_BACK);if(_this.canGoBack()){var item=_this.history[--_this.historyIndex];_this.onUpdate(item);_this.manageButtonsStates()}});this.$element.addEventListener(EVENTS.NAVIGATIONBAR_HOME,function(){pubsub.publish(EVENTS.NAVIGATIONBAR_HOME)});this.$element.addEventListener(EVENTS.NAVIGATIONBAR_NEXT,function(){pubsub.publish(EVENTS.NAVIGATIONBAR_NEXT);if(_this.canGoNext()){var item=_this.history[++_this.historyIndex];_this.onUpdate(item);_this.manageButtonsStates()}});pubsub.subscribe(EVENTS.GRAPH_OVERVIEW_DETAIL_SELECTED,function(type){_this.history.push({type:"overview",subtype:type});_this.historyIndex++;_this.$element.setAttribute("back-disabled","false")});pubsub.subscribe(EVENTS.SOMETHING_SELECTED,function(){});pubsub.subscribe(EVENTS.INIT_VIEW,function(){_this.$element.setAttribute("current","Overview");_this.$element.setAttribute("back-disabled","true");_this.$element.setAttribute("next-disabled","true");_this.history=[{type:"overview"}];_this.historyIndex=0})};NavigationBar.prototype.onUpdate=function(item){pubsub.publish(EVENTS.NAVIGATIONBAR_ONUPDATE,item)};NavigationBar.prototype.manageButtonsStates=function(){if(this.historyIndex===0&&this.count()>0){this.$element.setAttribute("back-disabled","true");this.$element.setAttribute("next-disabled","false")}else if(this.historyIndex===this.count()){this.$element.setAttribute("back-disabled","false");this.$element.setAttribute("next-disabled","true")}};NavigationBar.prototype.canGoBack=function(){return this.historyIndex>0};NavigationBar.prototype.canGoNext=function(){return this.historyIndex<this.count()};NavigationBar.prototype.count=function(){return this.history.length-1};return NavigationBar}();var NavigationBarManager=NavigationBar.getInstance();var PWASingleton=function(){function PWASingleton(){}PWASingleton.getInstance=function(){if(!PWASingleton.instance){PWASingleton.instance=new PWASingleton}return PWASingleton.instance};PWASingleton.prototype.init=function(){if("serviceWorker"in navigator){var PYTHEAS_CONTEXT=window.PYTHEAS_CONTEXT;if(window.location.host.indexOf("localhost")!==-1||PYTHEAS_CONTEXT&&PYTHEAS_CONTEXT==="electron"){return}var showRefreshUI_1=function(registration){var $refreshToaster=document.querySelector(".refresh-toaster");$refreshToaster.style.display="flex";var $refreshToaster_Refresh_button=$refreshToaster.querySelector(".refresh-toaster__refresh-button");if($refreshToaster_Refresh_button){$refreshToaster_Refresh_button.addEventListener("click",function(){if(!registration.waiting){return}$refreshToaster_Refresh_button.disabled=true;registration.waiting.postMessage("skipWaiting")})}var $refreshToaster_Close_button=$refreshToaster.querySelector(".refresh-toaster__close-button");if($refreshToaster_Close_button){$refreshToaster_Close_button.addEventListener("click",function(){$refreshToaster.style.display="none"})}};var onNewServiceWorker_1=function(registration,callback){if(registration.waiting){return callback()}function listenInstalledStateChange(){registration.installing.addEventListener("statechange",function(event){if(event.target.state==="installed"){callback()}})}if(registration.installing){return listenInstalledStateChange()}registration.addEventListener("updatefound",listenInstalledStateChange)};window.addEventListener("load",function(){navigator.serviceWorker.register("./sw.js").then(function(registration){if(!navigator.serviceWorker.controller){return}var preventDevToolsReloadLoop;navigator.serviceWorker.addEventListener("controllerchange",function(event){if(preventDevToolsReloadLoop){return}preventDevToolsReloadLoop=true;window.location.reload()});onNewServiceWorker_1(registration,function(){showRefreshUI_1(registration)})})})}};return PWASingleton}();var PWAManager=PWASingleton.getInstance();var ApplicationSingleton=function(){function ApplicationSingleton(){this.filesReady=false}ApplicationSingleton.getInstance=function(){if(!ApplicationSingleton.instance){ApplicationSingleton.instance=new ApplicationSingleton}return ApplicationSingleton.instance};ApplicationSingleton.prototype.init=function(){var _this=this;CodeWindowManager.init(document.querySelector(".code-window"));GraphWindowManager.init(document.querySelector(".graph-window"));NavigationBarManager.init(document.querySelector("py-navigation-bar"));WelcomeWindowManager.init(document.querySelector(".windows_welcome"));DropWindowManager.init();SettingsManager.init();ContextmenuManager.init();StatusbarManager.init();DemosManager.init();ContextManager.init();PWAManager.init();pubsub.subscribe(EVENTS.FILES_PARSED,function(parsedFiles){_this.filesReady=true;DataManager.init(parsedFiles);pubsub.publish(EVENTS.INIT_VIEW)});pubsub.subscribe(EVENTS.CODEBLOCK_STATEMENT_CLICKED,function(element){_this.onSomethingSelected(element)});pubsub.subscribe(EVENTS.GRAPH_ELEMENT_SELECTED,function(element){_this.onSomethingSelected(element)});pubsub.subscribe(EVENTS.NAVIGATIONBAR_HOME,function(){if(!_this.filesReady){return}pubsub.publish(EVENTS.INIT_VIEW)})};ApplicationSingleton.prototype.onSomethingSelected=function(element){pubsub.publish(EVENTS.SOMETHING_SELECTED,element)};return ApplicationSingleton}();var ApplicationManager=ApplicationSingleton.getInstance();var global$1=window;var document$1=global$1.document;var addEventListener="addEventListener";var removeEventListener="removeEventListener";var getBoundingClientRect="getBoundingClientRect";var gutterStartDragging="_a";var aGutterSize="_b";var bGutterSize="_c";var HORIZONTAL="horizontal";var NOOP=function(){return false};var isIE8=global$1.attachEvent&&!global$1[addEventListener];var calc=["","-webkit-","-moz-","-o-"].filter(function(prefix){var el=document$1.createElement("div");el.style.cssText="width:"+prefix+"calc(9px)";return!!el.style.length}).shift()+"calc";var isString=function(v){return typeof v==="string"||v instanceof String};var elementOrSelector=function(el){if(isString(el)){var ele=document$1.querySelector(el);if(!ele){throw new Error("Selector "+el+" did not match a DOM element")}return ele}return el};var getOption=function(options,propName,def){var value=options[propName];if(value!==undefined){return value}return def};var getGutterSize=function(gutterSize,isFirst,isLast,gutterAlign){if(isFirst){if(gutterAlign==="end"){return 0}if(gutterAlign==="center"){return gutterSize/2}}else if(isLast){if(gutterAlign==="start"){return 0}if(gutterAlign==="center"){return gutterSize/2}}return gutterSize};var defaultGutterFn=function(i,gutterDirection){var gut=document$1.createElement("div");gut.className="gutter gutter-"+gutterDirection;return gut};var defaultElementStyleFn=function(dim,size,gutSize){var style={};if(!isString(size)){if(!isIE8){style[dim]=calc+"("+size+"% - "+gutSize+"px)"}else{style[dim]=size+"%"}}else{style[dim]=size}return style};var defaultGutterStyleFn=function(dim,gutSize){var obj;return obj={},obj[dim]=gutSize+"px",obj};var Split=function(idsOption,options){if(options===void 0)options={};var ids=idsOption;var dimension;var clientAxis;var position;var positionEnd;var clientSize;var elements;if(Array.from){ids=Array.from(ids)}var firstElement=elementOrSelector(ids[0]);var parent=firstElement.parentNode;var parentStyle=getComputedStyle?getComputedStyle(parent):null;var parentFlexDirection=parentStyle?parentStyle.flexDirection:null;var sizes=getOption(options,"sizes")||ids.map(function(){return 100/ids.length});var minSize=getOption(options,"minSize",100);var minSizes=Array.isArray(minSize)?minSize:ids.map(function(){return minSize});var expandToMin=getOption(options,"expandToMin",false);var gutterSize=getOption(options,"gutterSize",10);var gutterAlign=getOption(options,"gutterAlign","center");var snapOffset=getOption(options,"snapOffset",30);var dragInterval=getOption(options,"dragInterval",1);var direction=getOption(options,"direction",HORIZONTAL);var cursor=getOption(options,"cursor",direction===HORIZONTAL?"col-resize":"row-resize");var gutter=getOption(options,"gutter",defaultGutterFn);var elementStyle=getOption(options,"elementStyle",defaultElementStyleFn);var gutterStyle=getOption(options,"gutterStyle",defaultGutterStyleFn);if(direction===HORIZONTAL){dimension="width";clientAxis="clientX";position="left";positionEnd="right";clientSize="clientWidth"}else if(direction==="vertical"){dimension="height";clientAxis="clientY";position="top";positionEnd="bottom";clientSize="clientHeight"}function setElementSize(el,size,gutSize,i){var style=elementStyle(dimension,size,gutSize,i);Object.keys(style).forEach(function(prop){el.style[prop]=style[prop]})}function setGutterSize(gutterElement,gutSize,i){var style=gutterStyle(dimension,gutSize,i);Object.keys(style).forEach(function(prop){gutterElement.style[prop]=style[prop]})}function getSizes(){return elements.map(function(element){return element.size})}function getMousePosition(e){if("touches"in e){return e.touches[0][clientAxis]}return e[clientAxis]}function adjust(offset){var a=elements[this.a];var b=elements[this.b];var percentage=a.size+b.size;a.size=offset/this.size*percentage;b.size=percentage-offset/this.size*percentage;setElementSize(a.element,a.size,this[aGutterSize],a.i);setElementSize(b.element,b.size,this[bGutterSize],b.i)}function drag(e){var offset;var a=elements[this.a];var b=elements[this.b];if(!this.dragging){return}offset=getMousePosition(e)-this.start+(this[aGutterSize]-this.dragOffset);if(dragInterval>1){offset=Math.round(offset/dragInterval)*dragInterval}if(offset<=a.minSize+snapOffset+this[aGutterSize]){offset=a.minSize+this[aGutterSize]}else if(offset>=this.size-(b.minSize+snapOffset+this[bGutterSize])){offset=this.size-(b.minSize+this[bGutterSize])}adjust.call(this,offset);getOption(options,"onDrag",NOOP)()}function calculateSizes(){var a=elements[this.a].element;var b=elements[this.b].element;var aBounds=a[getBoundingClientRect]();var bBounds=b[getBoundingClientRect]();this.size=aBounds[dimension]+bBounds[dimension]+this[aGutterSize]+this[bGutterSize];this.start=aBounds[position];this.end=aBounds[positionEnd]}function innerSize(element){if(!getComputedStyle){return null}var computedStyle=getComputedStyle(element);if(!computedStyle){return null}var size=element[clientSize];if(size===0){return null}if(direction===HORIZONTAL){size-=parseFloat(computedStyle.paddingLeft)+parseFloat(computedStyle.paddingRight)}else{size-=parseFloat(computedStyle.paddingTop)+parseFloat(computedStyle.paddingBottom)}return size}function trimToMin(sizesToTrim){var parentSize=innerSize(parent);if(parentSize===null){return sizesToTrim}if(minSizes.reduce(function(a,b){return a+b},0)>parentSize){return sizesToTrim}var excessPixels=0;var toSpare=[];var pixelSizes=sizesToTrim.map(function(size,i){var pixelSize=parentSize*size/100;var elementGutterSize=getGutterSize(gutterSize,i===0,i===sizesToTrim.length-1,gutterAlign);var elementMinSize=minSizes[i]+elementGutterSize;if(pixelSize<elementMinSize){excessPixels+=elementMinSize-pixelSize;toSpare.push(0);return elementMinSize}toSpare.push(pixelSize-elementMinSize);return pixelSize});if(excessPixels===0){return sizesToTrim}return pixelSizes.map(function(pixelSize,i){var newPixelSize=pixelSize;if(excessPixels>0&&toSpare[i]-excessPixels>0){var takenPixels=Math.min(excessPixels,toSpare[i]-excessPixels);excessPixels-=takenPixels;newPixelSize=pixelSize-takenPixels}return newPixelSize/parentSize*100})}function stopDragging(){var self=this;var a=elements[self.a].element;var b=elements[self.b].element;if(self.dragging){getOption(options,"onDragEnd",NOOP)(getSizes())}self.dragging=false;global$1[removeEventListener]("mouseup",self.stop);global$1[removeEventListener]("touchend",self.stop);global$1[removeEventListener]("touchcancel",self.stop);global$1[removeEventListener]("mousemove",self.move);global$1[removeEventListener]("touchmove",self.move);self.stop=null;self.move=null;a[removeEventListener]("selectstart",NOOP);a[removeEventListener]("dragstart",NOOP);b[removeEventListener]("selectstart",NOOP);b[removeEventListener]("dragstart",NOOP);a.style.userSelect="";a.style.webkitUserSelect="";a.style.MozUserSelect="";a.style.pointerEvents="";b.style.userSelect="";b.style.webkitUserSelect="";b.style.MozUserSelect="";b.style.pointerEvents="";self.gutter.style.cursor="";self.parent.style.cursor="";document$1.body.style.cursor=""}function startDragging(e){if("button"in e&&e.button!==0){return}var self=this;var a=elements[self.a].element;var b=elements[self.b].element;if(!self.dragging){getOption(options,"onDragStart",NOOP)(getSizes())}e.preventDefault();self.dragging=true;self.move=drag.bind(self);self.stop=stopDragging.bind(self);global$1[addEventListener]("mouseup",self.stop);global$1[addEventListener]("touchend",self.stop);global$1[addEventListener]("touchcancel",self.stop);global$1[addEventListener]("mousemove",self.move);global$1[addEventListener]("touchmove",self.move);a[addEventListener]("selectstart",NOOP);a[addEventListener]("dragstart",NOOP);b[addEventListener]("selectstart",NOOP);b[addEventListener]("dragstart",NOOP);a.style.userSelect="none";a.style.webkitUserSelect="none";a.style.MozUserSelect="none";a.style.pointerEvents="none";b.style.userSelect="none";b.style.webkitUserSelect="none";b.style.MozUserSelect="none";b.style.pointerEvents="none";self.gutter.style.cursor=cursor;self.parent.style.cursor=cursor;document$1.body.style.cursor=cursor;calculateSizes.call(self);self.dragOffset=getMousePosition(e)-self.end}sizes=trimToMin(sizes);var pairs=[];elements=ids.map(function(id,i){var element={element:elementOrSelector(id),size:sizes[i],minSize:minSizes[i],i:i};var pair;if(i>0){pair={a:i-1,b:i,dragging:false,direction:direction,parent:parent};pair[aGutterSize]=getGutterSize(gutterSize,i-1===0,false,gutterAlign);pair[bGutterSize]=getGutterSize(gutterSize,false,i===ids.length-1,gutterAlign);if(parentFlexDirection==="row-reverse"||parentFlexDirection==="column-reverse"){var temp=pair.a;pair.a=pair.b;pair.b=temp}}if(!isIE8){if(i>0){var gutterElement=gutter(i,direction,element.element);setGutterSize(gutterElement,gutterSize,i);pair[gutterStartDragging]=startDragging.bind(pair);gutterElement[addEventListener]("mousedown",pair[gutterStartDragging]);gutterElement[addEventListener]("touchstart",pair[gutterStartDragging]);parent.insertBefore(gutterElement,element.element);pair.gutter=gutterElement}}setElementSize(element.element,element.size,getGutterSize(gutterSize,i===0,i===ids.length-1,gutterAlign),i);if(i>0){pairs.push(pair)}return element});function adjustToMin(element){var isLast=element.i===pairs.length;var pair=isLast?pairs[element.i-1]:pairs[element.i];calculateSizes.call(pair);var size=isLast?pair.size-element.minSize-pair[bGutterSize]:element.minSize+pair[aGutterSize];adjust.call(pair,size)}elements.forEach(function(element){var computedSize=element.element[getBoundingClientRect]()[dimension];if(computedSize<element.minSize){if(expandToMin){adjustToMin(element)}else{element.minSize=computedSize}}});function setSizes(newSizes){var trimmed=trimToMin(newSizes);trimmed.forEach(function(newSize,i){if(i>0){var pair=pairs[i-1];var a=elements[pair.a];var b=elements[pair.b];a.size=trimmed[i-1];b.size=newSize;setElementSize(a.element,a.size,pair[aGutterSize],a.i);setElementSize(b.element,b.size,pair[bGutterSize],b.i)}})}function destroy(preserveStyles,preserveGutter){pairs.forEach(function(pair){if(preserveGutter!==true){pair.parent.removeChild(pair.gutter)}else{pair.gutter[removeEventListener]("mousedown",pair[gutterStartDragging]);pair.gutter[removeEventListener]("touchstart",pair[gutterStartDragging])}if(preserveStyles!==true){var style=elementStyle(dimension,pair.a.size,pair[aGutterSize]);Object.keys(style).forEach(function(prop){elements[pair.a].element.style[prop]="";elements[pair.b].element.style[prop]=""})}})}if(isIE8){return{setSizes:setSizes,destroy:destroy}}return{setSizes:setSizes,getSizes:getSizes,collapse:function collapse(i){adjustToMin(elements[i])},destroy:destroy,parent:parent,pairs:pairs}};ApplicationManager.init();Split([".graph-window",".code-window"],{sizes:[50,50],minSize:[700,500],gutterSize:5});